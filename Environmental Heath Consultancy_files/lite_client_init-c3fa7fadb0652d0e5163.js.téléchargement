/*! For license information please see lite_client_init-c3fa7fadb0652d0e5163.js.LICENSE.txt */
(()=>{var e,t,r,s={189182:(e,t,r)=>{"use strict";const s=r(970610),n=r(444020),i=r(480500),a=r(92806),o=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function d(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function f(e){return Array.isArray(e)?e.sort():"object"==typeof e?f(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function m(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=m(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function h(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,s)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===s[e]&&(s[e]={}),s[e][t[1]]=r):s[e]=r};case"bracket":return(e,r,s)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],r):s[e]=[r]:s[e]=r};case"colon-list-separator":return(e,r,s)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],r):s[e]=[r]:s[e]=r};case"comma":case"separator":return(t,r,s)=>{const n="string"==typeof r&&r.includes(e.arrayFormatSeparator),i="string"==typeof r&&!n&&l(r,e).includes(e.arrayFormatSeparator);r=i?l(r,e):r;const a=n||i?r.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===r?r:l(r,e);s[t]=a};case"bracket-separator":return(t,r,s)=>{const n=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!n)return void(s[t]=r?l(r,e):r);const i=null===r?[]:r.split(e.arrayFormatSeparator).map((t=>l(t,e)));void 0!==s[t]?s[t]=[].concat(s[t],i):s[t]=i};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const n of e.split("&")){if(""===n)continue;let[e,a]=i(t.decode?n.replace(/\+/g," "):n,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:l(a,t),r(l(e,t),a,s)}for(const e of Object.keys(s)){const r=s[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=p(r[e],t);else s[e]=p(r,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce(((e,t)=>{const r=s[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=f(r):e[t]=r,e}),Object.create(null))}t.extract=u,t.parse=h,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],s=function(e){switch(e.arrayFormat){case"index":return t=>(r,s)=>{const n=r.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[d(t,e),"[",n,"]"].join("")]:[...r,[d(t,e),"[",d(n,e),"]=",d(s,e)].join("")]};case"bracket":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[d(t,e),"[]"].join("")]:[...r,[d(t,e),"[]=",d(s,e)].join("")];case"colon-list-separator":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[d(t,e),":list="].join("")]:[...r,[d(t,e),":list=",d(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(s,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?s:(n=null===n?"":n,0===s.length?[[d(r,e),t,d(n,e)].join("")]:[[s,d(n,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,d(t,e)]:[...r,[d(t,e),"=",d(s,e)].join("")]}}(t),n={};for(const t of Object.keys(e))r(t)||(n[t]=e[t]);const i=Object.keys(n);return!1!==t.sort&&i.sort(t.sort),i.map((r=>{const n=e[r];return void 0===n?"":null===n?d(r,t):Array.isArray(n)?0===n.length&&"bracket-separator"===t.arrayFormat?d(r,t)+"[]":n.reduce(s(r),[]).join("&"):d(r,t)+"="+d(n,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,s]=i(e,"#");return Object.assign({url:r.split("?")[0]||"",query:h(u(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:l(s,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[o]:!0},r);const s=m(e.url).split("?")[0]||"",n=t.extract(e.url),i=t.parse(n,{sort:!1}),a=Object.assign(i,e.query);let c=t.stringify(a,r);c&&(c=`?${c}`);let l=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(l=`#${r[o]?d(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${s}${c}${l}`},t.pick=(e,r,s)=>{s=Object.assign({parseFragmentIdentifier:!0,[o]:!1},s);const{url:n,query:i,fragmentIdentifier:c}=t.parseUrl(e,s);return t.stringifyUrl({url:n,query:a(i,r),fragmentIdentifier:c},s)},t.exclude=(e,r,s)=>{const n=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,n,s)}},444020:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),s=new RegExp("("+t+")+","gi");function n(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],n(r),n(s))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(r)||[],s=1;s<t.length;s++)t=(e=n(t,s).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=s.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=i(r[0]);n!==r[0]&&(t[r[0]]=n)}r=s.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),o=0;o<a.length;o++){var c=a[o];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},92806:e=>{"use strict";e.exports=function(e,t){for(var r={},s=Object.keys(e),n=Array.isArray(t),i=0;i<s.length;i++){var a=s[i],o=e[a];(n?-1!==t.indexOf(a):t(a,o,e))&&(r[a]=o)}return r}},480500:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},970610:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},927792:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(773445),n=r(865979);const i={},a=((e,t)=>{const r=((e,t)=>new Proxy(i,{get(r,s){if("__esModule"===s)return r[s];const n=e();if(!n)throw new Error("Trying to access Vulcan instance before it was initialized on the window");return"useSelector"===s?t:"useQuery"===s?n.useQueryHookFactory(t):n[s]}}))((()=>(0,n.w)(e)),(r=>t((0,n.w)(e),r)));return r})("mf-vulcan",s.oR)},865979:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});const s=e=>window?.microfrontends?.vulcanStores?.[e?.replaceAll('"',"")]},653250:(e,t,r)=>{"use strict";var s=r(700616);var n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=s.useState,a=s.useEffect,o=s.useLayoutEffect,c=s.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=i({inst:{value:r,getSnapshot:t}}),n=s[0].inst,l=s[1];return o((function(){n.value=r,n.getSnapshot=t,d(n)&&l({inst:n})}),[e,r,t]),a((function(){return d(n)&&l({inst:n}),e((function(){d(n)&&l({inst:n})}))}),[e]),c(r),r};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:l},950139:(e,t,r)=>{"use strict";var s=r(700616),n=r(61688);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useSyncExternalStore,o=s.useRef,c=s.useEffect,d=s.useMemo,l=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,s,n){var f=o(null);if(null===f.current){var m={hasValue:!1,value:null};f.current=m}else m=f.current;f=d((function(){function e(e){if(!c){if(c=!0,a=e,e=s(e),void 0!==n&&m.hasValue){var t=m.value;if(n(t,e))return o=t}return o=e}if(t=o,i(a,e))return t;var r=s(e);return void 0!==n&&n(t,r)?t:(a=e,o=r)}var a,o,c=!1,d=void 0===r?null:r;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]}),[t,r,s,n]);var u=a(e,f[0],f[1]);return c((function(){m.hasValue=!0,m.value=u}),[u]),l(u),u}},61688:(e,t,r)=>{"use strict";e.exports=r(653250)},552798:(e,t,r)=>{"use strict";e.exports=r(950139)},700616:e=>{"use strict";e.exports=globalThis.React},773445:(e,t,r)=>{"use strict";r.d(t,{oR:()=>d});var s=r(700616),n=r(552798);const{useDebugValue:i}=s,{useSyncExternalStoreWithSelector:a}=n;let o=!1;const c=e=>e;function d(e,t=c,r){r&&!o&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),o=!0);const s=a(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return i(s),s}}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return s[e].call(r.exports,r,r.exports,i),r.exports}i.m=s,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>(76607===e?"localization":e)+"-"+{53321:"701ddba01d747542fbb0",76607:"20294de7a411780e3afa"}[e]+".js",i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="Monolith:",i.l=(r,s,n,a)=>{if(e[r])e[r].push(s);else{var o,c;if(void 0!==n)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var f=d[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+n){o=f;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",t+n),o.src=r,0!==o.src.indexOf(window.location.origin+"/")&&(o.crossOrigin="anonymous")),e[r]=[s];var m=(t,s)=>{o.onerror=o.onload=null,clearTimeout(u);var n=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(s))),t)return t(s)},u=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),c&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="https://webpack.llama.fan:3444/build/",(()=>{if(void 0!==i){var e=i.u,t=i.e,r={},s={};i.u=function(t){return e(t)+(r.hasOwnProperty(t)?"?"+r[t]:"")},i.e=function(n){return t(n).catch((function(t){var a=s.hasOwnProperty(n)?s[n]:3;if(a<1){var o=e(n);throw t.message="Loading chunk "+n+" failed after 3 retries.\n("+o+")",t.request=o,t}return new Promise((function(e){var t=3-a+1;setTimeout((function(){var o="cache-bust=true"+("&retry-attempt="+t);r[n]=o,s[n]=a-1,e(i.e(n))}),1e3)}))}))}}})(),(()=>{var e={83716:0};i.f.j=(t,r)=>{var s=i.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var n=new Promise(((r,n)=>s=e[t]=[r,n]));r.push(s[2]=n);var a=i.p+i.u(t),o=new Error;i.l(a,(r=>{if(i.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var n=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",o.name="ChunkLoadError",o.type=n,o.request=a,s[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,n,[a,o,c]=r,d=0;if(a.some((t=>0!==e[t]))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(c)c(i)}for(t&&t(r);d<a.length;d++)n=a[d],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=globalThis.webpackChunkMonolith=globalThis.webpackChunkMonolith||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(r="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"2b4b4065e2a3e938162af193581047591cc4c216"},r.SENTRY_RELEASES=r.SENTRY_RELEASES||{},r.SENTRY_RELEASES["monday-monolith-client@mondaycom-3j"]={id:"2b4b4065e2a3e938162af193581047591cc4c216"},window.webpackPublicPath&&(i.p=window.webpackPublicPath),(()=>{"use strict";var e={};i.r(e),i.d(e,{addTranslations:()=>Ge,getLocaleDataMapping:()=>Je,translateKey:()=>Qe});const t={MF_NAME:"mf-board-columns-components",WINDOW_VARIABLES:["__boardColumnsComponentsPackage__"]},r={MF_NAME:"mf-timeline-components",WINDOW_VARIABLES:["__timelineCommonPackage__"]};const s="preferences",n="user-prefs";let a=null;function o(){return a||(a=new Promise(((e,t)=>{const r=indexedDB.open("sw-user-preferences",1);r.onupgradeneeded=()=>{const e=r.result;e.objectStoreNames.contains(s)||e.createObjectStore(s,{keyPath:"key"})},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})),a)}async function c(e){try{const t={timeZoneOffset:(new Date).getTimezoneOffset()/60*-1,firstDayOfTheWeek:e?.firstdayoftheweek},r=await async function(){try{const e=await o();return new Promise(((t,r)=>{const i=e.transaction(s,"readonly").objectStore(s).get(n);i.onsuccess=()=>{const e=i.result;t(e?e.data:null)},i.onerror=()=>r(i.error)}))}catch(e){return console.error("[getUserPreferences] IndexedDB error:",e),null}}();(r?.timeZoneOffset!==t.timeZoneOffset||r?.firstDayOfTheWeek!==t.firstDayOfTheWeek)&&await async function(e){const t=await o();return new Promise(((r,i)=>{const a=t.transaction(s,"readwrite").objectStore(s).put({key:n,data:e});a.onsuccess=()=>r(),a.onerror=()=>i(a.error)}))}(t)}catch(e){console.error("[syncUserPreferencesToSW] Failed to sync preferences:",e)}}function d(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}let l;function f(){return window.Pulse||={},window.Pulse.current_user_promise||(window.Pulse.current_user_promise=d()),window.Pulse.current_user_promise}function m(){window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_CURRENT_ENTITIES_INIT)}async function u(){l=d(),window.mondayHelpers.deferredInit.runAfterDependencies(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_CURRENT_ENTITIES_INIT,(()=>(async function(){try{const e=i(927792).default,[t,r]=await Promise.all([e.currentAccount.queries.get().wait(),e.currentUser.queries.get().wait()]);let s,n;window.Pulse||={};try{s=JSON.parse(JSON.stringify(r))}catch(e){console.error("Failed to clone user object",e),s=r}try{n=JSON.parse(JSON.stringify(t))}catch(e){console.error("Failed to clone account object",e),n=t}Object.defineProperty(window.Pulse,"current_account",{get:()=>n,configurable:!0}),Object.defineProperty(window.Pulse,"current_user",{get:()=>s,configurable:!0}),f().resolve(s),l.resolve(),c(n),m()}catch(e){console.error("Failed current entities init",e),f().resolve(null),window.mondayHelpers.logError(e,{info:"Failed current entities init",message:e?.message}),l.reject(e),m()}}(),window.mondayHelpers.deferredInit.SKIP_SCRIPT_FINISH)),[window.mondayHelpers.deferredInit.deferredScripts.VULCAN_MF_INIT],!0),await l.promise}function p(e=!1,t="use1"){const r=(e=>{const t=window.location.search.substring(1);return new URLSearchParams(t).get(e)})("r")||t;let s="";return r&&(s=`r=${r}`,e&&(s=`${s}&`)),s}function h(e="GET"){return{credentials:"same-origin",method:e,headers:{"Content-Type":"application/json"}}}const _=()=>window.mondayHelpers.runWithRetries(y,{retries:3,interval:100,onError:(e,t)=>{console.error(`Failed fetching granted features ${t} times`)},onFinish:e=>{window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_GRANTED_FEATURES_INIT,!1,e)}}).catch((e=>{throw console.error("Failed fetching granted features",e),e})),w=e=>{try{if(!window.BigBrainExtensionTrackOnClientSide)return;if(e.preventMergeFeaturesFromLocalStorage)return;JSON.parse(safeLocalStorage.getItem("override_client_feature_flags")||"[]").forEach((t=>{e[t]=!0}));JSON.parse(safeLocalStorage.getItem("disabled_client_feature_flags")||"[]").forEach((t=>{e[t]=!1}))}catch(e){}};async function y(){let e={};if(window.Pulse=window.Pulse||{},!window.Pulse.is_spp){const t=h(),r="/layout/current_user_granted_features",s=await fetch(r,t),n=await s.json();w(n.features),e=n.features}Object.defineProperty(window.Pulse,"features",{get:()=>e})}const g=()=>async function(){const e={};let t;if(window.Pulse?.is_react_embedded_board||window.Pulse?.is_spp){const r=function(e,t=!1){const[r,s,n]=window.location.hostname.split(".").reverse();if(n&&!t)return e;if("auth"===n)return e;const i=window.location.port?`:${window.location.port}`:"";return`${window.location.protocol}//auth.${s}.${r}${i}${e}`}("/layout/layout_variables_data_spp",!0);t=[E([p()],e,`${window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_LAYOUT_VARIABLES_INIT}_spp`,r)]}else t=[E(["skip_ab_tests=true","skip_user_templates=true"],e,`${window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_LAYOUT_VARIABLES_INIT}_skip_all`),E(["only_ab_tests=true"],e,`${window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_LAYOUT_VARIABLES_INIT}_only_ab_tests`),E(["only_user_templates=true"],e,`${window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_LAYOUT_VARIABLES_INIT}_only_user_templates`)];await Promise.all(t);const r=Object.values(e).find((({isSuccess:e})=>!e));if(r){throw r.error||new Error(`Failed fetching layout variables for ${r.id}`)}}().catch((e=>{throw console.error("Failed fetching layout variables",e),e}));function S(e,t,r,s){e[t]={isSuccess:r,finished:!0,error:s,id:t}}async function E(e,t,r,s){const n=e.join(",")||"all";t[n]={finished:!1};try{await window.mondayHelpers.runWithRetries((()=>async function(e=[],t="/layout/layout_variables_data"){const r=h(),s=`${t}?${e.join("&")}`,n=await fetch(s,r),i=await n.json();Object.assign(window.Pulse,i)}(e,s)),{retries:3,interval:100,onError:(t,r)=>{console.error(`Failed fetching layout variables (${e}) ${r} times`)},onFinish:e=>{window.mondayHelpers.deferredInit.markScriptAsFinished(r,!1,e)}}),S(t,n,!0)}catch(e){console.error("Failed fetching layout variables",e),S(t,n,!1,e)}}const M=()=>{const e=(()=>{const e=document.querySelector("meta[name=csrf-token]");return e?.content})();return e?{"X-CSRF-Token":e}:{}},I="GET";const T=async(e,t,r=null,s={})=>{e=(e=>e?.toUpperCase())(e);const n=window.Pulse?.Globals?.build_timestamp,i={"X-BT":n,...s?.headers};!function(e){Object.assign(e,M())}(i);const a={method:e,headers:i};if(s.formData)a.body=r;else if(a.headers["Content-Type"]="application/json",e!==I)a.body=function(e,t){return t&&e!==I?JSON.stringify(t):t}(e,r);else{const e=r?.params,s=function(e){if(!e)return"";const t=new URLSearchParams;for(const r in e){const s=e[r];void 0!==s&&(Array.isArray(s)?s.forEach((e=>t.append(r,e))):t.append(r,s))}return t.toString()}(e);s&&(t.endsWith("?")&&(t=t.slice(0,-1)),t.includes("?")?t+=`&${s}`:t+=`?${s}`)}const o=await fetch(t,a);return await async function(e){if(!e.ok){let t,r,s;try{const s=e.clone();r=await s.json(),t=r.message||r.error||JSON.stringify(r)}catch{t=e.statusText}switch(e.status){case 404:throw new Error(`404, Not found: ${t}`);case 500:throw s=new Error(`500, Internal server error: ${t}`),s.errorData=r,s;default:throw new Error(`HTTP error! status: ${e.status}, message: ${t}`)}}}(o),s.skipJsonResponse?o:o.json()};const A=e=>(t,r=null,s={})=>T(e,t,r,s),v=A(I);A("POST"),A("DELETE"),A("PATCH"),A("PUT");const P=new class{logError(e,t,r){try{if("undefined"!=typeof window){const s={action:t,key:r},n={sourceType:"ignite-client-sdk"};window.mondayHelpers?.onLogsAvailable?.((t=>{t.error(e,s,n)}))}}catch(e){console.error("Error logging error",e)}}async init(e){const{endpoint:t,forceRefresh:r,anonymousMode:s}=e||{};if(!this.isInitialized()||r){if("undefined"!=typeof window&&(window.Pulse=window.Pulse||{},window.Pulse.ignite||(window.Pulse.ignite={flags:{},configVariables:{}}),!s&&!window.Pulse.is_spp)){const e=await v(t||"/layout/current_user_ignite_data");window.Pulse.ignite.flags=e.flags||{},window.Pulse.ignite.configVariables=e.configVariables||{}}this.mergeFlagsIfNeeded(window.Pulse?.ignite?.flags)}}isReleased(e){return this.isInitialized()?!!this.getIgniteState()?.flags[e]:(this.logError("IgniteClientSDK is not initialized","isReleased",e),!1)}getConfigVariable(e,t){if(!this.isInitialized())return this.logError("IgniteClientSDK is not initialized","getConfigVariable",e),t;const r=this.getIgniteState()?.configVariables;return r&&e in r?r[e]:t}isInitialized(){return"undefined"!=typeof window&&!!window.Pulse?.ignite?.flags&&!!window.Pulse?.ignite?.configVariables}getIgniteState(){return window?.Pulse?.ignite}mergeFlagsIfNeeded(e){try{if(!window.BigBrainExtensionTrackOnClientSide||!e)return;JSON.parse(localStorage.getItem("override_ignite_flags")||"[]").forEach((t=>{e[t]=!0}));JSON.parse(localStorage.getItem("disabled_ignite_flags")||"[]").forEach((t=>{e[t]=!1}))}catch(e){this.logError(e,"mergeMondayToolsFlags")}}},b=(e={})=>window.mondayHelpers.runWithRetries((async function(){await P.init(e)}),{retries:3,interval:100,onError:(e,t)=>{console.error(`Failed fetching ignite ${t} times`)},onFinish:e=>{window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_IGNITE_INIT,!1,e)}}).catch((e=>{throw console.error("Failed fetching ignite data",e),e}));var N=i(189182);function F(){return(0,N.parse)(window.location.search).mf_test_version}function D(){return(0,N.parse)(window.location.search).mf_prod_version}const O="mfs-canary";const k=new class{constructor({isMondayUser:e}){this.isMondayUser=e}isInCanary(e,t){try{if(!t||!localStorage)return!1;if(this.isMondayUser)return!0;const r=this.getCanaryPercentage(t);return r>=this.getAndSetUserCanaryExperimentalGroup(e,t.version)}catch(e){return console.error(e),!1}}getCanaryPercentage(e){const{startTimestamp:t,endTimestamp:r}=e,s=new Date(r).valueOf()-new Date(t).valueOf(),n=(new Date).valueOf()-new Date(t).valueOf(),i=Math.round(n/s*100);return(a=i)>100?100:a<0?0:a;var a}getAndSetUserCanaryExperimentalGroup(e,t){const r=(e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return null}})(O)||{};let s=r[e]?.[t];return s||(s=Math.round(100*Math.random()),r[e]={[t]:s},n=O,i=r,localStorage&&localStorage.setItem(n,JSON.stringify(i)),s);var n,i}}({isMondayUser:!1});var L,C,R;!function(e){e[e.js=0]="js",e[e.css=1]="css"}(L||(L={})),function(e){e.development="development",e.staging="staging",e.production="production"}(C||(C={})),function(e){e.SkeletonCreated="skeleton_created",e.GetAllMfsStart="get_all_mfs_start",e.GetAllMfsSuccess="get_all_mfs_success",e.GetAllMfsError="get_all_mfs_error",e.InitMF="init_mf",e.MFLoadStart="mf_load_start",e.PrefetchMF="prefetch_mf",e.PrepareMfStart="skeleton_prepare_mf_start",e.PrepareMfSuccess="skeleton_prepare_mf_success",e.PrepareMfError="skeleton_prepare_mf_error",e.FetchMfAssetsStart="fetch_mf_assets_start",e.FetchMfAssetsSuccess="fetch_mf_assets_success",e.FetchMfAssetsError="fetch_mf_assets_error",e.FetchMfAssetsFallbackSuccess="fetch_mf_assets_fallback_success",e.FetchMfAssetsFallbackError="fetch_mf_assets_fallback_error",e.MFNotInList="mf_not_in_list",e.UseLocalMetaData="use_local_meta_data",e.StartFetchingMetaData="start_fetching_meta_data",e.SuccessFetchingMetaData="success_fetching_meta_data",e.ErrorFetchingMetaData="error_fetching_meta_data",e.StartFetchingManifest="start_fetching_manifest",e.SuccessFetchingManifest="success_fetching_manifest",e.ErrorFetchingManifest="error_fetching_manifest",e.SharedDependenciesLoadStart="shared_dependencies_load_start",e.SharedDependenciesLoadEnd="shared_dependencies_load_end",e.StartLoadingJsAssets="start_loading_js_assets",e.SuccessLoadingJsAssets="success_loading_js_assets",e.SuccessLoadingJSAsset="success_loading_js_asset",e.ErrorLoadingJSAsset="error_loading_js_assets",e.SuccessLoadingCSSAsset="success_loading_css_asset",e.ErrorLoadingCSSAsset="error_loading_asset_css",e.ErrorMissingAssetsDir="error_missing_assets_dir",e.MfContainerStart="mf_container_start",e.MfUserSsrStart="mf_user_ssr_start",e.MfUserSsrSuccess="mf_user_ssr_success",e.MfUserSsrError="mf_user_ssr_error",e.StartPreFetchMF="start_prefetch_mf",e.ErrorPreFetchMF="error_prefetch_mf",e.MfUserInitStart="mf_user_init_start",e.MfUserInitSuccess="mf_user_init_success",e.MfUserInitError="mf_user_init_error",e.MfUserRenderStart="mf_user_render_start",e.MfUserRenderSuccess="mf_user_render_success",e.MfUserRenderError="mf_user_render_error",e.MfUserRenderComplete="mf_user_render_complete",e.MfUserUpdateInitialDataError="mf_user_update_initial_data_error",e.MfUserUnmount="mf_user_unmount",e.MfUserUnmountError="mf_user_unmount_error",e.MFLoadDone="mf_load_done"}(R||(R={}));const U="mf-localstorage-dev";function j(){return function(){try{const e=window.localStorage?.getItem(U)||"[]";return JSON.parse(e)}catch(e){return console.error("Error getting local MFs",e),[]}}().reduce(((e,t)=>(e[t.name]=e[t.name]||{},e[t.name].endpoint=t.endpoint,e[t.name].version=t.version,e[t.name].active=t.active,e)),{})}function $(e){return j()[e]?.active||!1}function x(e,t,r){const{methodsConfig:s,attempts:n,delayMs:i,onRetry:a,onSuccessfulRetry:o,onAllAttemptsFailed:c}=t,d=i??1e3;return new Promise(((t,i)=>{let l=1;const f=()=>{const m="string"==typeof e?e:e.url;let u;const p=function(e){return"string"!=typeof e?e?.clone():e}(e),h=function(e,t){return t?.method?t.method:"string"==typeof e?"GET":e.method}(e,r);fetch(p,r).then((e=>{if(u=e.status,e.ok)1!==l&&o?.({attempt:l,attempts:n,delayMs:d,status:u,url:m});else if(function(e,t,r){if(!e||0===Object.keys(e).length)return!0;const s=e[r];return s?.includes(t)}(s,u,h))throw new Error(`Attempt ${l} - Fetch failed with status ${u}`);t(e)})).catch((e=>{l<n?(a?.({attempt:l,attempts:n,delayMs:d,status:u,url:m}),l++,setTimeout(f,d)):(c?.({attempt:l,attempts:n,delayMs:d,status:u,url:m}),i(e))}))};f()}))}const H=new class{constructor(){this.pendingPromises=new Map,this.serviceVersion=1}getPendingPromisesMap(){return"undefined"!=typeof window?(window.fetchOnePromiseServiceMap||(window.fetchOnePromiseServiceMap=this.pendingPromises),window.fetchOnePromiseServiceMap):this.pendingPromises}getVersion(){return this.serviceVersion}getPendingId(e){return"string"==typeof e?`GET.${e}`:`${e.method?.toUpperCase()||"GET"}.${e.url}`}clearPromise(e,t){const r=this.getPendingId(e);this.getPendingPromisesMap().get(r)?.promise===t&&this.getPendingPromisesMap().delete(r)}setPendingPromise(e,t){const r={promise:t};return this.getPendingPromisesMap().set(this.getPendingId(e),r),r}clearPromiseAfterComplete(e,t,r){const s=()=>{r?setTimeout((()=>{this.clearPromise(e,t)}),r):this.clearPromise(e,t)};t.then(s).catch(s)}getPendingPromise(e){if(this.getPendingPromisesMap().get(this.getPendingId(e)))return async function(t,r){const s=r(e);return(await t.get(s).promise).clone()}(this.pendingPromises,this.getPendingId)}fetchWithOnePromise(e,t={}){const{log:r,graceTimeMs:s,retry:n,cache:i}=t,a=this.getPendingPromise(e);if(a)return this.getPendingPromisesMap().get(this.getPendingId(e)).moreThanOne=!0,r?.trace("existing fetchPromise for",e),a;const o=function(e,t){return{onRetry:e?.onRetry||(({attempt:e,attempts:r,delayMs:s})=>t?.trace(`Fetch attempt ${e} (out of ${r}) failed for`,"retrying in",s,"ms")),onSuccessfulRetry:e?.onSuccessfulRetry||(({attempt:e,attempts:r})=>t?.trace(`Fetch attempt ${e} (out of ${r}) succeeded`)),onAllAttemptsFailed:e?.onAllAttemptsFailed||(({attempt:e,attempts:r,delayMs:s,status:n})=>t?.trace("All fetch attempts failed",{attempt:e,attempts:r,delayMs:s,status:n})),attempts:3,...e}}(n,r),c=i?{cache:i}:void 0,d=n?x(e,o,c):fetch(e,c);r?.trace("just created fetchPromise for",e);const l=this.setPendingPromise(e,d);return s&&(l.moreThanOne=!0),this.clearPromiseAfterComplete(e,d,s),d.then((t=>{l.moreThanOne&&(r?.trace("cloning due to moreThanOne for",e,s),function(e){const t=e.json;e.json=async function(){const r=e.clone();return t.call(r)}}(t))})),d}};function B(){return"undefined"!=typeof window?(e=H,window.fetchOnePromiseService?window.fetchOnePromiseService.getVersion()<e.getVersion()&&(window.fetchOnePromiseService=e):window.fetchOnePromiseService=e,window.fetchOnePromiseService):H;var e}async function W(e,t){return(await fetch(e,t)).json()}const V="/microfrontends/mf_assets";function G(){}function Q(e){return e.endsWith("/")?e.slice(0,-1):e}async function J({testOverridesQueryParams:e,prodOverridesQueryParams:t,mfUrl:r,emitSkeletonEvent:s=G}){if(s(R.FetchMfAssetsStart),window.microfrontends?.mfAssets)return window.microfrontends.mfAssets;const n=function({testOverridesQueryParams:e,prodOverridesQueryParams:t}){if(t)return"?"+N.stringify({"prod_overrides[]":t});if(e)return"?"+N.stringify({"test_overrides[]":e});return""}({testOverridesQueryParams:e,prodOverridesQueryParams:t});try{const i=`${r}/mf-assets${n}`,a=await async function(e,t){return await B().fetchWithOnePromise(e,t)}(i,{graceTimeMs:5e3,cache:"reload"}),o=await a.json();return o.cdnAge=a.headers?.get("age"),o.fromBrowserCache=function(e){try{const t=(performance.getEntriesByType?.("resource")||[]).find((t=>t.name===e));if(!t)return!1;return 0===t.transferSize||t.encodedBodySize===t.decodedBodySize||t.responseStart-t.startTime==0||t.fetchStart-t.workerStart==0}catch(e){return void console.error("Error checking if response is from cache",e)}}(i),window.microfrontends||(window.microfrontends={}),window.microfrontends.mfAssets=function({mfAssets:e,testOverridesQueryParams:t,prodOverridesQueryParams:r}){const s=function({testOverridesQueryParams:e,prodOverridesQueryParams:t}){const r=z(e),s=z(t);return[r,s].reduce(((e,t)=>(t&&(e[t.mfName]=t),e)),{})}({testOverridesQueryParams:t,prodOverridesQueryParams:r});return Object.keys(s).forEach((t=>{delete e.assets[t]?.canary})),e}({mfAssets:o,testOverridesQueryParams:e,prodOverridesQueryParams:t}),s(R.FetchMfAssetsSuccess),o}catch(t){if(console.error("Fetch mf-assets failed",t),s(R.FetchMfAssetsError,{error:t}),!e)return await async function(e){try{const t=await W(V);return e(R.FetchMfAssetsFallbackSuccess),t}catch(t){throw e(R.FetchMfAssetsFallbackError,{error:t}),new Error("Failed to fetch mf-assets")}}(s);throw new Error("Failed to fetch mf-assets")}}function z(e){if(!e||["null","null~undefined"].includes(e))return;const[t,r,s]=e.split("~");return{mfName:t,version:r,testEnvOverride:s}}function K(e){if(!e)return;const{mfName:t,version:r,testEnvOverride:s}=e;return`${`${t}~${r}`}${(s?`~${s}`:"").toLowerCase()}`}const Y="data-mf-name";function X({mfName:e,src:t,onEvent:r=G,assetType:s=L.js,appendScript:n,type:i}){const a=document.createElement("link");a.href=t,a.rel=s===L.js&&"module"===i?"modulepreload":"preload",a.as=s===L.js?"script":"style",a.setAttribute(Y,e);const o=new Promise((e=>{a.onload=e}));return a.onerror=()=>{r(s===L.js?R.ErrorLoadingJSAsset:R.ErrorLoadingCSSAsset,{mfName:e,src:t,mfResource:t})},n?n(a):document.body.appendChild(a),o}function q(e,t){const{canary:r,nonExternals:s}=ee(e,t);return s?t.nonExternalsEntrypoints:r?t.canary.entrypoints:t.entrypoints}function Z(e,t){const{canary:r,nonExternals:s}=ee(e,t);return s?[]:r?t.canary.shared:t.shared}function ee(e,t){return{canary:t.canary&&k.isInCanary(e,t.canary),nonExternals:te(e)&&!!t.nonExternalsEntrypoints}}function te(e){const t=(r={key:"MF_EXTERNALS_FALLBACK",defaultValue:"none"},window?.Pulse?.Globals?.system_variables?.[r.key]||r.defaultValue);var r;return"none"!==t&&("all"===t||t[e])}var re;!function(e){e[e.preFetchOnly=0]="preFetchOnly",e[e.skipPreFetch=1]="skipPreFetch",e[e.withPreFetch=2]="withPreFetch"}(re||(re={}));class se{constructor({emitSkeletonEvent:e,sharedDependencies:t,initMF:r}){this.emitSkeletonEvent=e,this.sharedDependencies=t,this.initMF=r}async loadMfAssets({mfName:e,manifest:t,assetsDir:r,mode:s=re.withPreFetch,appendScript:n}){const i=this.getSharedDependenciesBuckets({mfName:e,manifest:t}),a=q(e,t).map((e=>`${r}/${e}`));return this.loadAssets({mfName:e,mode:s,sharedDependenciesBuckets:i,mfAssets:a,appendScript:n,mfs:t.mfs,scriptType:t.scriptType??null})}async loadMfs(e){return this.initMF?Promise.all(e.map((e=>this.initMF(e)))):Promise.resolve()}async loadAssets({mfName:e,mfAssets:t,sharedDependenciesBuckets:r,mode:s=re.withPreFetch,appendScript:n,mfs:i=[],scriptType:a}){if(s!==re.skipPreFetch){const s=r.flat().filter((e=>!this.sharedDependencies.getDependencyLoadPromise(e.globalName)));this.preload({mfAssets:t,sharedDependenciesBuckets:[s],mfName:e,appendScript:n,scriptType:a})}if(s===re.preFetchOnly)return{assetsLoadTime:0};await this.loadMfs(i),await this.loadSharedDependencies({mfName:e,sharedDependenciesBuckets:r});return{assetsLoadTime:await this.loadManifestAssets({mfAssets:t,mfName:e,appendScript:n,scriptType:a})}}getSharedDependenciesBuckets({mfName:e,manifest:t}){if(!t)return[];const{sameAsHost:r}=t,s=Z(e,t);if(!s?.length)return[];if(!0===r)return[];const n=[];return s.forEach((({globalName:e,dependencies:t})=>{if(!e)throw new Error('Attempted to load a shared dependency with missing globalName".        This most likely means that the MF has an old Trident version which is no longer supported');const r=this.sharedDependencies.getUrl(e),s=Object.keys(t).length;n[s]||(n[s]=[]),n[s].push({globalName:e,url:r})})),n}async loadSharedDependencies({sharedDependenciesBuckets:e,mfName:t,appendScript:r}){const s=Date.now();this.emitSkeletonEvent(R.SharedDependenciesLoadStart,{mfName:t});for(let s=0;s<e.length;s++){const n=e[s]||[],i=Promise.all(n.map((e=>this.sharedDependencies.ensureDependencyLoadPromise(e.globalName,(()=>this.loadAsset({mfName:t,src:e.url,appendScript:r}))))));await i}this.emitSkeletonEvent(R.SharedDependenciesLoadEnd,{mfName:t,loadTime:Date.now()-s})}preload({mfAssets:e,sharedDependenciesBuckets:t,mfName:r,appendScript:s,scriptType:n}){const i=t.flat().map((({url:e})=>e)),a=e.filter((e=>e.endsWith(".js"))),o=e.filter((e=>e.endsWith(".css")));Promise.all([...i.map((e=>X({mfName:r,src:e,appendScript:s}))),...a.map((e=>X({mfName:r,src:e,appendScript:s,type:n}))),...o.map((e=>X({mfName:r,src:e,assetType:L.css,type:n})))]).catch((e=>{throw e}))}async loadAsset({src:e,mfName:t,appendScript:r,scriptType:s=null}){e.endsWith(".js")?await function({mfName:e,src:t,onEvent:r=G,appendScript:s,type:n}){const i=document.createElement("script");i.src=t,i.setAttribute(Y,e),n&&(i.type=n);const a=new Promise((e=>{i.onload=e}));return i.onerror=()=>{r(R.ErrorLoadingJSAsset,{mfName:e,src:t,mfResource:t})},s?s(i):document.body.appendChild(i),a}({mfName:t,src:e,onEvent:this.emitSkeletonEvent,appendScript:r,type:s}):e.endsWith(".css")&&await function({mfName:e,src:t,onEvent:r=G}){const s=document.createElement("link");s.href=t,s.rel="stylesheet",s.setAttribute(Y,e);const n=new Promise((e=>{s.onload=e}));return s.onerror=()=>{r(R.ErrorLoadingCSSAsset,{mfName:e,src:t,mfResource:t})},document.head.appendChild(s),n}({mfName:t,src:e,onEvent:this.emitSkeletonEvent})}async loadManifestAssets({mfAssets:e,mfName:t,appendScript:r,scriptType:s}){this.emitSkeletonEvent(R.StartLoadingJsAssets,{mfName:t});const n=Date.now(),i=[],{cssFiles:a,jsFiles:o}=e.reduce(((e,t)=>(t.endsWith(".js")?e.jsFiles.push(t):t.endsWith(".css")&&e.cssFiles.push(t),e)),{cssFiles:[],jsFiles:[]});a.forEach((e=>{i.push(this.loadAsset({mfName:t,src:e}))}));for(const e of o)await this.loadAsset({mfName:t,src:e,appendScript:r,scriptType:s??($(t)?"module":null)});this.emitSkeletonEvent(R.SuccessLoadingJsAssets,{mfName:t}),await Promise.all(i);return Date.now()-n}}const ne="__SHARED_DEPENDENCIES__";class ie{constructor(){this.globalDependencies=function(){const e=void 0!==globalThis[ne]?globalThis[ne]:{};return window.microfrontends=window.microfrontends||{},window.microfrontends.globalSharedDependencies=window.microfrontends.globalSharedDependencies||new Map,Object.keys(e).forEach((e=>{window.microfrontends.globalSharedDependencies.has(e)||window.microfrontends.globalSharedDependencies.set(e,{loadFrom:"preloaded-from-host",loadPromise:Promise.resolve()})})),window.microfrontends.globalSharedDependencies}()}ensureDependencyLoadPromise(e,t){const r=this.globalDependencies.get(e);return r?(r.loadPromise||(r.loadPromise=t()),r.loadPromise):null}getDependencyLoadPromise(e){const t=this.globalDependencies.get(e);return t&&t.loadPromise||null}addKnownDependencies(e){e.forEach((({globalName:e,url:t})=>{this.globalDependencies.has(e)||this.globalDependencies.set(e,{loadFrom:t,loadPromise:null})}))}getUrl(e){const t=this.globalDependencies.get(e);if(!t)throw new Error(`Attempted getting URL to load of a missing global dependency: ${e}`);return t.loadFrom}}function ae(e){(e=>{window[ne]||(window[ne]={}),Object.assign(window[ne],e)})(e.flat().reduce(((e,{globalName:t,url:r})=>(e[t]=r,e)),{}))}class oe{constructor({mfUrl:e,onError:t,testOverridesQueryParams:r=F(),prodOverridesQueryParams:s=D()}){this.globalSharedDependenciesManager=new ie,this.mfUrl=e,this.testOverridesQueryParams=r,this.prodOverridesQueryParams=s,this.onError=t,this.emitSkeletonEvent=this.emitSkeletonEvent.bind(this),this.manifestHandler=new se({emitSkeletonEvent:this.emitSkeletonEvent,sharedDependencies:this.globalSharedDependenciesManager})}async preload(e){const t=Date.now();this.preloadTiming={preloadStartTime:t};try{this.mfAssetsResponse=await J({testOverridesQueryParams:this.testOverridesQueryParams,prodOverridesQueryParams:this.prodOverridesQueryParams,mfUrl:this.mfUrl,emitSkeletonEvent:this.emitSkeletonEvent})}catch(e){const r=e,s=Date.now()-t;throw new Error(`Failed to get mf-assets in ${s} ms: ${r?.message}`)}return this.preloadTiming.allMfDataLoadTime=Date.now()-t,await this.preloadRecursively(e),this.preloadTiming.totalPreloadTime=Date.now()-this.preloadTiming.preloadStartTime,this.preloadTiming}getPreloadedSharedDependencyBuckets(e){return function(e,t){const r=[];e.forEach((([e,t])=>{r.push(...Z(e,t).filter((e=>!!e.globalName)))}));const s={};r.forEach((e=>{if(!s[e.globalName]){const t=Object.keys(e.dependencies).length;s[e.globalName]=t}}));const n=[];return Object.keys(s).forEach((e=>{var r;n[r=s[e]]||(n[r]=[]),n[s[e]].push({globalName:e,url:t[e]})})),n.filter(Boolean)}(this.getPreloadedMfsManifestData(e),this.mfAssetsResponse.sharedDependencyLocations)}getPreloadedMfsManifestData(e){return Object.entries(this.mfAssetsResponse.assets).filter((([t])=>e.includes(t)))}async preloadRecursively(e){const t=this.mfAssetsResponse.assets;await this.handleLocalMfs(e);const r=function(e,t){return t.map((t=>e[t]?.mfs)).flat().filter(Boolean)}(t,e);r?.length>0&&await this.preloadRecursively(r);const s=this.getPreloadedSharedDependencyBuckets(e);this.globalSharedDependenciesManager.addKnownDependencies(s.flat());const n=e.reduce(((e,r)=>{const s=function(e,t){const{canary:r,nonExternals:s}=ee(e,t);return s?t.url:r?t.canary?.url:t.url}(r,t[r]);return e.push({mfName:r,assets:q(r,t[r]).map((e=>`${s}/${e}`)),scriptType:t[r].canary?.scriptType??t[r].scriptType??null}),e}),[]);try{const e=Date.now(),t=n.map((({mfName:e,assets:t,scriptType:r})=>this.manifestHandler.loadAssets({mfName:e,mode:re.withPreFetch,sharedDependenciesBuckets:s,mfAssets:t,scriptType:r})));await Promise.all(t);const r=Date.now()-e;this.preloadTiming.assetsLoadTime=(this.preloadTiming.assetsLoadTime||0)+r}catch(e){throw console.error("Failed to preload assets",e),e}var i,a;return ae(s),i=e.map((e=>({name:e,entrypoints:q(e,t[e])}))),(a=window.microfrontends).preloaded_mfs_entries??(a.preloaded_mfs_entries={}),i.forEach((({name:e,entrypoints:t})=>{window.microfrontends.preloaded_mfs_entries[e]=t})),this.preloadTiming.totalPreloadTime=Date.now()-this.preloadTiming.preloadStartTime,this.preloadTiming}emitSkeletonEvent(e,t={}){e!==R.ErrorLoadingJSAsset&&e!==R.ErrorLoadingCSSAsset&&e!==R.FetchMfAssetsFallbackError||this.onError(new Error(`${e}: ${t.src}`))}async handleLocalMfs(e){const t=j();for(const r of e)if($(r)){const e=`${t[r].endpoint}/asset-manifest.json`,s=await W(e,{mode:"cors"});this.mfAssetsResponse.assets[r]={...this.mfAssetsResponse.assets[r],...s}}}}const ce=(e,t)=>{let r="success";const{mfsToPreload:s=[],url:n}=window.microfrontends,i={mfsToPreload:s,preloadTiming:e};t&&(r="error",i.error_message=t,i.url=n),(t||Math.random()<.01)&&(window.BigBrain?BigBrain("track","mf-preload",{info1:r,data:i}):window.mondayHelpers.deferredInit.runAfterBigBrainInitialized(window.mondayHelpers.deferredInit.deferredScripts.MICRO_FRONTEND_PRELOAD,(()=>{BigBrain("track","mf-preload",{info1:r,data:i})})))},de=e=>{console.error("Failed preloading mf",e),window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_MF_PRELOAD_INIT),ce(void 0,e?.message||"could not get error message")};async function le(){const{mfsToPreload:e,url:t}=window.microfrontends;if(!e?.length)return void window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_MF_PRELOAD_INIT);setTimeout((()=>{window.mondayHelpers.deferredInit.alreadyRunScriptsObj[window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_MF_PRELOAD_INIT]||(window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_MF_PRELOAD_INIT),console.error("MF preload timed out - marking CLIENT_INIT_MF_PRELOAD_INIT as finished"),ce(void 0,"MF Preload did not finish on time (15000ms)"))}),15e3);const r=await async function({mfsToPreload:e,mfUrl:t,isMondayUser:r,onError:s,testOverridesQueryParams:n=F(),prodOverridesQueryParams:i=D()}){return k.isMondayUser=r,new oe({mfUrl:t,onError:s,testOverridesQueryParams:n,prodOverridesQueryParams:i}).preload(e)}({mfsToPreload:window.microfrontends.mfsToPreload,mfUrl:t,testOverridesQueryParams:window.microfrontends.mf_test_version_override,onError:de,isMondayUser:window.microfrontends.isMondayUser});window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_MF_PRELOAD_INIT),ce(r)}const fe=()=>{const e=performance.now();return window.mondayHelpers.runWithRetries(ue,{retries:1,interval:100,onError:(e,t)=>{console.error(`Failed fetching inbox count ${t} times`)}}).then((t=>{Pulse.inbox_count_init=t,me(e)})).catch((t=>{console.error("Failed fetching inbox count data",t),Pulse.inbox_count_init=Pulse.inbox_count_init||0,me(e)})),window.mondayHelpers.deferredInit.SKIP_SCRIPT_FINISH};function me(e){window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.INBOX_COUNT_INIT,!1,e)}async function ue(){if(void 0!==Pulse.inbox_count_init)return Pulse.inbox_count_init;if(window.Pulse.is_spp)return 0;const e=h(),t=await fetch("/layout/get_inbox_data",e);return(await t.json()).inbox_count}const pe=e=>{window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_BLOCK_SCREENS_INIT,!1,e)};async function he(){const e=h(),t=await fetch("/layout/current_user_blocked_data",e);return await t.json()}const _e={VISITOR_ID:"visitor_id",ACCOUNT_ID:"account_id",CALLBACK_NAME:"callback_name",SOURCE_NAME:"source_name",ACCOUNT_FEATURE_PERCENTAGE:"account_feature_percentage",ACCOUNT_FEATURE_PERCENTAGE_GROUP:"account_feature_perc_group",TIER:"tier",PRODUCT_KIND:"product_kind",SIGNUP_PRODUCT_KIND:"signup_product_kind",COMPONENT_NAME:"component_name",IS_ADMIN:"is_admin",IS_FIRST_USER:"is_first_user",IS_GUEST:"is_guest",IS_VIEW_ONLY:"is_view_only",SUBSCRIPTION:"subscription",PRICING_VERSION:"pricing_version",CODE_USED:"code_used",SERVER_CLUSTER:"server_cluster",CLUSTER:"cluster",SUB_CLUSTER:"sub_cluster",ERROR_SOURCE_TYPE:"error_source_type",SESSION_TIME:"session_time",LAST_EVENT_GENERIC:e=>`last_${e}`,LAST_EVENT:"last_event",ACTION_TYPE:"action_type",BOARD_ID:"board_id",PUSHER_NAME:"pusher_name",BOARD_VIEW_TYPE:"board_view_type",OVERVIEW_ID:"overview_id",BOARD_SUBSET_ID:"board_subset_id",COLUMN_TYPE:"column_type",COLUMN_ID:"column_id",ENTITY_TYPE:"entity_type",VIRTUALIZE_ROW_TYPE:"virtualize_row_type",FULL_STORY_SESSION_URL:"full_story_session_url",COOKIE_NAME:"cookie_name",URL:"url",IS_SOFT_SIGNUP:"is_soft_signup",IS_SIGNUP:"is_signup",BUILD_TIME:"build_time",REGION:"region",IS_MDB:"is_mdb",HAS_STANDALONE_PRODUCTS:"has_standalone_products",MEMORY:"memory",STATUS_ERROR_CODE:"status_error_code",STATUS_ERROR_TEXT:"status_error_text",WEBPACK_BUILD_TIME:"WEBPACK_BUILD_TIME",HTML_SERVER_TIMESTAMP:"HTML_SERVER_TIMESTAMP",HTML_BUILD_TIMESTAMP:"HTML_BUILD_TIMESTAMP",HTML_POD_ID:"HTML_POD_ID",HTML_FROM_SW_CACHE:"HTML_FROM_SW_CACHE",HTML_SW_CACHE_EXP:"HTML_SW_CACHE_EXP",CLIENT_INIT_TIME:"client_init_time",HOST_ENVIRONMENT:"host_environment",INDEXED_DB_TABLE_NAME:"indexed_db_table_name",CALLER:"caller",PULSE_INIT_STATUS:"pulse_init_status",DISABLED_MDB_REQUESTS_FROM_CVMS:"disabled_mdb_requests_from_cvms",SKIP_PD:"skip_pd",MF_NAME:"mf_name",PLATFORM_TRANS_LOAD:"platform_trans_load",PLATFORM_TRANS_LOAD_PROMISE:"platform_trans_load_promise",MF_ASSETS_METADATA:"mf_assets_metadata",VULCAN_MF_VERSION:"vulcan_mf_version",MF_REDUX_LOADED:"mf_redux_loaded",HAS_FULLSTORY:"has_fullstory",HIGH_LEVEL_LOW_LEVEL:"high_level_low_level",IS_SENSITIVE_ACCOUNT:"sensitive_account"},we=(new Set(Object.values(_e)),"mf_package_init"),ye=window.__PACKAGE_LOAD_PROMISES||{};function ge(e){return ye[e]||(ye[e]=d()),ye[e]}window.__PACKAGE_LOAD_PROMISES=ye;const Se={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Ee;const Me=new Uint8Array(16);function Ie(){if(!Ee&&(Ee="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ee))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ee(Me)}const Te=[];for(let e=0;e<256;++e)Te.push((e+256).toString(16).slice(1));function Ae(e,t=0){return Te[e[t+0]]+Te[e[t+1]]+Te[e[t+2]]+Te[e[t+3]]+"-"+Te[e[t+4]]+Te[e[t+5]]+"-"+Te[e[t+6]]+Te[e[t+7]]+"-"+Te[e[t+8]]+Te[e[t+9]]+"-"+Te[e[t+10]]+Te[e[t+11]]+Te[e[t+12]]+Te[e[t+13]]+Te[e[t+14]]+Te[e[t+15]]}const ve=function(e,t,r){if(Se.randomUUID&&!t&&!e)return Se.randomUUID();const s=(e=e||{}).random||(e.rng||Ie)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return Ae(s)},Pe="version",be="is_ssr",Ne={name:"init",spans:{getAllMfs:"getAllMfs",fetchingMetaData:"fetchingMetaData",fetchingManifest:"fetchingManifest",loadExternals:"loadExternals",loadJsAssets:"loadJsAssets",userInit:"userInit"}},Fe={name:"render"},De={name:"csr",spans:{beforeInit:"beforeInit_csr",init:"init_csr",render:"render_csr",renderTimeToInteractive:"renderTimeToInteractive_csr"}},Oe={name:"ssr",spans:{beforeInit:"beforeInit_ssr",fetchAndAppendHtml:"fetchAndAppendHtml_ssr",init:"init_ssr",render:"render_ssr",renderTimeToInteractive:"renderTimeToInteractive_ssr"}},ke={mfFcp:"mf-fcp",mfLcp:"mf-lcp"};class Le{constructor(e,t){this.transactionsByMf={},this.createTransaction=e,this.preloadedMFs=t}getTransactionByMf(e,t){const r=this.transactionsByMf[e];return r?r[t]:null}startTransaction(e,t,r={}){var s;const n=this.createTransaction(t,e,r);(s=this.transactionsByMf)[e]||(s[e]={}),this.transactionsByMf[e][t]=n}finishTransaction(e,t){const r=this.getTransactionByMf(e,t);r&&("end"in r?r.end():"finish"in r&&r.finish())}startSpan(e,t,r){const s=this.getTransactionByMf(e,t);s&&("startSpanManual"in s?this.transactionsByMf[e][r]=s.startSpanManual({name:r,forceTransaction:!0,op:r},(e=>e)):"startChild"in s&&(this.transactionsByMf[e][r]=s.startChild({op:r,description:r})))}finishSpan(e,t){if(!e||!t)return;const r=this.getTransactionByMf(e,t);r&&("end"in r?r.end():"finish"in r&&r.finish())}getSsrTransactionName(e){return e?Oe.name:De.name}startWebVitalTransaction(e,t,r){const s=`${t}_${r?"ssr":"csr"}`,n={webVital:t,isSsr:r,mfSpecific:!0};this.startTransaction(e,s,n)}finishWebVitalTransaction(e,t,r){const s=`${t}_${r?"ssr":"csr"}`;this.finishTransaction(e,s)}track(e,t={}){const{mfName:r,version:s}=t;try{switch(e){case R.MfContainerStart:{const e=this.getSsrTransactionName(t.isSsr);this.startTransaction(r,e,{[Pe]:s,[be]:t.isSsr}),this.startWebVitalTransaction(r,ke.mfFcp,t.isSsr),this.startWebVitalTransaction(r,ke.mfLcp,t.isSsr);const n=t.isSsr?Oe.spans.beforeInit:De.spans.beforeInit;this.startSpan(r,e,n);break}case R.MfUserSsrStart:this.finishSpan(r,Oe.spans.beforeInit),this.startSpan(r,Oe.name,Oe.spans.fetchAndAppendHtml);break;case R.MfUserSsrSuccess:this.finishWebVitalTransaction(r,ke.mfFcp,!0),this.finishSpan(r,Oe.spans.fetchAndAppendHtml);break;case R.MFLoadStart:{this.startTransaction(r,Ne.name,{[Pe]:s}),t.isSsr||this.finishSpan(r,De.spans.beforeInit);const e=t.isSsr?Oe.spans.init:De.spans.init;this.startSpan(r,this.getSsrTransactionName(t.isSsr),e);break}case R.MFLoadDone:{this.finishTransaction(r,Ne.name);const e=t.isSsr?Oe.spans.init:De.spans.init;this.finishSpan(r,e);break}case R.StartFetchingMetaData:this.startSpan(r,Ne.name,Ne.spans.fetchingMetaData);break;case R.SuccessFetchingMetaData:this.finishSpan(r,Ne.spans.fetchingMetaData);break;case R.StartFetchingManifest:this.startSpan(r,Ne.name,Ne.spans.fetchingManifest);break;case R.SuccessFetchingManifest:this.finishSpan(r,Ne.spans.fetchingManifest);break;case R.SharedDependenciesLoadStart:this.startSpan(r,Ne.name,Ne.spans.loadExternals);break;case R.SharedDependenciesLoadEnd:this.finishSpan(r,Ne.spans.loadExternals);break;case R.StartLoadingJsAssets:this.startSpan(r,Ne.name,Ne.spans.loadJsAssets);break;case R.SuccessLoadingJsAssets:this.finishSpan(r,Ne.spans.loadJsAssets);break;case R.MfUserInitStart:this.preloadedMFs.has(r)&&this.startTransaction(r,Ne.name,{[Pe]:s}),this.startSpan(r,Ne.name,Ne.spans.userInit);break;case R.MfUserInitSuccess:this.finishSpan(r,Ne.spans.userInit),this.preloadedMFs.has(r)&&this.finishTransaction(r,Ne.name);break;case R.MfUserRenderStart:{const e=t.isSsr?Oe.spans.render:De.spans.render,s=t.isSsr?Oe.spans.renderTimeToInteractive:De.spans.renderTimeToInteractive;this.startSpan(r,this.getSsrTransactionName(t.isSsr),e),this.startSpan(r,this.getSsrTransactionName(t.isSsr),s),this.startTransaction(r,Fe.name);const n=new MutationObserver((s=>{for(const i of s)if("childList"===i.type){this.finishTransaction(r,Fe.name),this.finishSpan(r,e),t.isSsr||this.finishWebVitalTransaction(r,ke.mfFcp,!1),n.disconnect();break}}));n.observe(t.element,{childList:!0});break}case R.MfUserRenderComplete:{this.finishWebVitalTransaction(r,ke.mfLcp,t.isSsr);const e=t.isSsr?Oe.spans.renderTimeToInteractive:De.spans.renderTimeToInteractive;this.finishSpan(r,e),this.finishTransaction(r,this.getSsrTransactionName(t.isSsr));break}}}catch(r){console.error(`Failed creating sentry transactions. event: ${e}. data:${JSON.stringify(t)}`)}}}class Ce{constructor({host:e,api:t,preloadedMFs:r}){this.uuid=ve(),this.host=e,this.api=t,this.host.environment===C.production&&this.api?.loggerService?.startTransaction?this.transactionsManager=new Le(this.api.loggerService.startTransaction,r):this.transactionsManager=null}track(e,t={}){this.transactionsManager&&this.transactionsManager.track(e,t),this.bigbrainSample(e,t).catch((e=>{console.error("Error while trying to send BigBrain sample event:",e)}))}cleanBigbrainData(e){const{error:t}=e;return{...e,error:t?t.message:void 0,element:void 0}}async bigbrainSample(e,t){if("undefined"!=typeof window&&Math.random()<.005){if(!this.bigbrain){const{bigBrain:e}=await i.e(53321).then(i.bind(i,953321));this.bigbrain=e(this.host.environment,this.host.name)}const r={kind:e,data:{uuid:this.uuid,time:Date.now(),...this.cleanBigbrainData(t)}};this.bigbrain.track("trident-metrics",r)}}}const Re="We noticed you had CSP errors while loading a local MF. Please refer to this guide: https://trident.monday.beer/docs/frontend/getting-started/develop-mf#working-with-a-remote-host",Ue=/https?:\/\/localhost/;var je;!function(e){e.Preloaded="preloaded",e.WithAssetsDir="withAssetsDir",e.WithAssetsData="withAssetsData"}(je||(je={}));const $e="tridentMfContainerUuid";class xe{constructor({name:e,initConfig:t,skeletonContext:r,version:s,isLocal:n}){if(this.preFetched=!1,this.loadedAssets=new Set,this.renderedContainerUuids=new Set,this.name=e,this.skeletonContext=r,this.version=s,this.initType=t.type,this.isLocal=n??!1,t.type===je.Preloaded)this.handleLoadedEntrypointScripts(t.entrypoints);else if(t.type===je.WithAssetsDir)this.assetsDir=t.assetsDir,this.manifestPath=t.manifestPath||`${Q(t.assetsDir)}/asset-manifest.json`;else{if(t.type!==je.WithAssetsData)throw new Error(`Unexpected initialization type for MF "${this.name}": "${t.type}"`);this.assetsManifest=t.manifest,this.assetsDir=t.assetsDir}}get isCurrentlyRendered(){return!!this.renderedContainerUuids.size}get renderedContainerCount(){return this.renderedContainerUuids.size}render(e,t={}){if(!this.mfInterface)return;const{emitSkeletonEvent:r}=this.skeletonContext;try{r(R.MfUserRenderStart,{mfName:this.name,element:e}),this.mfInterface.render(e,t);const s=this.ensureContainerUuid(e);s&&this.renderedContainerUuids.add(s),r(R.MfUserRenderSuccess,{mfName:this.name})}catch(e){r(R.MfUserRenderError,{mfName:this.name,error:e})}}unmount(e){const{emitSkeletonEvent:t}=this.skeletonContext;try{this.mfInterface?.unmount({element:e,mfName:this.name});const r=this.getContainerUuid(e);r&&this.renderedContainerUuids.delete(r),t(R.MfUserUnmount,{mfName:this.name})}catch(e){t(R.MfUserUnmountError,{mfName:this.name,error:e})}}async preFetch(){if(this.preFetched||this.initOncePromise)return;const{emitSkeletonEvent:e}=this.skeletonContext;if(this.validateAssetsDataInput()&&this.validateAssetsDirInput())try{this.preFetched=!0;const e=Q(this.assetsDir);let t;t=this.initType===je.WithAssetsData?this.assetsManifest:await W(this.manifestPath,{mode:"cors"}),await this.skeletonContext.manifestHandler.loadMfAssets({mfName:this.name,manifest:t,assetsDir:e,mode:re.preFetchOnly})}catch(t){e(R.ErrorPreFetchMF,{mfName:this.name,error:t})}else e(R.ErrorPreFetchMF,{mfName:this.name,error:new Error(`Attempt to prefetch MF: ${this.name} with a missing params. assetsDir: ${this.assetsDir}, manifestPath: ${this.manifestPath}`)})}async initOnce(e,t){return this.initOncePromise||(this.initOncePromise=this.initOnceImpl(e,t)),this.initOncePromise}shouldSkipTranslationsFetch(){return this.assetsManifest?.skipTranslationFetch??!1}validateAssetsDirInput(){return this.initType!==je.WithAssetsDir||this.assetsDir&&this.manifestPath}validateAssetsDataInput(){return this.initType!==je.WithAssetsData||this.assetsManifest&&Object.keys(this.assetsManifest).length>0&&this.assetsDir}validateInputByInitType(){if(!this.validateAssetsDirInput())throw new Error(`Attempted to initialize MF: ${this.name} with missing params. init type: ${this.initType} assetsDir: ${this.assetsDir}, manifestPath: ${this.manifestPath}\nThis probably means that an MF was preloaded and attempted to be initialized afterwards.`);if(!this.validateAssetsDataInput())throw new Error(`Attempted to initialize MF: ${this.name}, init type: ${this.initType} with a missing assets manifest.`)}async initOnceImpl(e,t){if(this.mfInterface)return this.mfInterface;this.validateInputByInitType();const{emitSkeletonEvent:r}=this.skeletonContext;if(r(R.MFLoadStart,{mfName:this.name,version:this.version}),![je.WithAssetsDir,je.WithAssetsData].includes(this.initType))throw new Error(`Unexpected initialization type for MF "${this.name}": "${this.initType}"`);const s=Q(this.assetsDir);if(this.initType===je.WithAssetsDir){r(R.StartFetchingManifest,{mfName:this.name,version:this.version?.toString()||"",mfResource:s});try{const n=await W(this.manifestPath,{mode:"cors"});r(R.SuccessFetchingManifest,{mfName:this.name}),await this.handleManifestFiles({manifest:n,assetsDir:s,timeStart:e,appendScript:t})}catch(e){(function(e,t){if("object"!=typeof e||"Failed to fetch"!==e.message)return!1;const r=Ue.test(t),s="localhost"===window.location.hostname;return r&&!s})(e,this.manifestPath)&&(console.log(`\n======================\n${Re}\n======================\n`),alert(Re)),r(R.ErrorFetchingManifest,{mfName:this.name,error:e,manifestURL:this.manifestPath})}}if(this.initType===je.WithAssetsData){const r=this.assetsManifest;await this.handleManifestFiles({manifest:r,assetsDir:s,timeStart:e,appendScript:t})}return this.mfInterface}async handleManifestFiles({manifest:e,assetsDir:t,timeStart:r,appendScript:s,type:n}){if(!e)return;const i=(n?e.entrypoints.filter((e=>e.endsWith(`.${n}`))):e.entrypoints).filter((e=>!this.loadedAssets.has(e)));if(0===i.length)return;const{assetsLoadTime:a}=await this.skeletonContext.manifestHandler.loadMfAssets({mfName:this.name,manifest:{...e,entrypoints:i},assetsDir:t,mode:this.preFetched?re.skipPreFetch:re.withPreFetch,appendScript:s});i.forEach((e=>{this.loadedAssets.add(e)})),this.handleLoadedEntrypointScripts(e.entrypoints),this.skeletonContext.emitSkeletonEvent(R.MFLoadDone,{mfName:this.name,totalLoadTime:Date.now()-r,assetsLoadTime:a})}isInitialized(){return!!this.initOncePromise}handleLoadedEntrypointScripts(e){const t=e.find((e=>e.startsWith("MF-")));if(!t)throw new Error(`No Main MF file found for MF: "${this.name}"`);const{emitSkeletonEvent:r,mfApi:s}=this.skeletonContext,[n]=t.split("."),i=window[n];try{this.mfInterface=i;const e={mfUuid:n,mfName:this.name};r(R.MfUserInitStart,e),i.init({api:s}),r(R.MfUserInitSuccess,e)}catch(e){r(R.MfUserInitError,{error:e,mfName:this.name})}}ensureContainerUuid(e){return e[$e]||(e[$e]=ve()),e[$e]}getContainerUuid(e){return e[$e]}}class He{constructor({api:e,mfUrl:t,preloadedMFs:r={},isDev:s=!1,mfTestVersion:n=F(),mfProdVersion:i=D(),onEvent:a=G,host:o,mfAssets:c,isMondayUser:d=!1,onPrepareMF:l=G}){this.preparedMfs=new Set,this.emitEvent=(e,t)=>{this.tracker.track(e,t),this.onEvent(e,t)},this.renderMF=(e,t,r={})=>{const s=this.mfs.get(e);s?s.render(t,r):console.warn(`Tried to render a non-existing MF: ${e}`)},this.unmountMF=(e,t)=>{const r=this.mfs.get(e);r?r.unmount(t):console.warn(`Tried to unmount a non-existing MF: ${e}`)},this.getCurrentlyRenderedMfsCount=()=>this.getCurrentlyRenderedMfs().total,this.getCurrentlyRenderedMfs=()=>{const e={total:0};for(const t of this.mfs.values()){const r=t.renderedContainerCount;r&&(e[t.name]=r,e.total+=r)}return e},this.ensureMfInstance=async e=>{if(this.mfs.has(e)||await this.initializeMfsPromise,!this.mfs.has(e)){const t=this.getLocalMfAssetsDir(e),r=new xe({name:e,skeletonContext:this.context,initConfig:{type:je.WithAssetsDir,assetsDir:t}});this.mfs.set(e,r)}},this.ensureMfInstanceSsr=async(e,t)=>{this.mfs.has(e)||await this.initializeMfsPromise;let r=this.mfs.get(e);return r||(r=new xe({name:e,skeletonContext:this.context,initConfig:{type:je.WithAssetsData,assetsDir:`${this.mfUrl}/${e}/latest`,manifest:t}}),this.mfs.set(e,r)),r},this.prepareMF=async({mfName:e})=>{if(this.preparedMfs.has(e))return;const t=this.mfs.get(e);try{this.emitEvent(R.PrepareMfStart,{mfName:e});const r=t.shouldSkipTranslationsFetch();await this.onPrepareMF({mfName:e,skipTranslationFetch:r}),this.preparedMfs.add(e),this.emitEvent(R.PrepareMfSuccess,{mfName:e})}catch(t){const r=`Failed to execute onPrepareMF provided to trident skeleton for ${e}. Check your onPrepareMF implementation.`;throw this.emitEvent(R.PrepareMfError,{mfName:e,error:t,description:r}),new Error(r)}},this.ssrMF=async(e,t,r,s,n)=>{if(n.children.length>0||n.textContent?.trim())return;this.emitEvent(R.MfUserSsrStart,{mfName:e,isSsr:!0});const{html:i,assetManifest:a}=await this.fetchSsr(s,t,r),o=await this.ensureMfInstanceSsr(e,a);await o.handleManifestFiles({manifest:a,assetsDir:o.assetsDir,timeStart:Date.now(),type:"css"});const c=i.replace(/\\"/g,'"').replace(/\\n/g,"");n.innerHTML=c,this.emitEvent(R.MfUserSsrSuccess,{mfName:e,isSsr:!0}),await o.handleManifestFiles({manifest:a,assetsDir:o.assetsDir,timeStart:Date.now(),type:"js"})},this.preFetchMF=async e=>(this.emitEvent(R.PrefetchMF,{mfName:e}),await this.ensureMfInstance(e),await this.prepareMF({mfName:e}),this.mfs.get(e).preFetch()),this.initMF=async(e,t)=>{this.emitEvent(R.InitMF,{mfName:e,initializedMFs:[...this.mfs.keys()]});const r=Date.now();return await this.ensureMfInstance(e),await this.prepareMF({mfName:e}),this.mfs.get(e).initOnce(r,t)},this.handleManifestFiles=async(e,t,r,{timeStart:s})=>{const n=this.mfs.get(e);n?await n.handleManifestFiles({manifest:t,assetsDir:r,timeStart:s}):console.warn(`Tried to handle manifest files for a non-existing MF: ${e}`)},this.mfUrl=t,this.onEvent=a,this.onPrepareMF=l,k.isMondayUser=d;const f=this.emitEvent.bind(this);this.globalSharedDependencies=new ie,this.mfs=new Map;const m=new se({emitSkeletonEvent:f,sharedDependencies:this.globalSharedDependencies,initMF:(...e)=>this.initMF(...e)});this.context={skeleton:this,isDev:s,emitSkeletonEvent:f,mfApi:e,manifestHandler:m},this.tracker=new Ce({host:o,api:e,preloadedMFs:new Set(Object.keys(r))}),this.emitEvent(R.SkeletonCreated,{preloaded:r}),this.mfTestVersion=z(n),this.mfProdVersion=z(i),this.handlePreloadedMfs(r),this.initializeMfsPromise=this.fetchCurrentMfsWithAssets(c)}async fetchSsr(e,t,r){const s=await fetch(`/${e}/render`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t,ssrData:r})});return await s.json()}async fetchCurrentMfsWithAssets(e){const{mfs:t,globalSharedDependencies:r}=this,{assets:s,sharedDependencyLocations:n}=e||await J({testOverridesQueryParams:this.testOverridesQueryParams,prodOverridesQueryParams:this.prodOverridesQueryParams,mfUrl:this.mfUrl,emitSkeletonEvent:this.emitEvent});Object.entries(s).forEach((([e,r])=>{if(t.has(e))return;const s=k.isInCanary(e,r.canary)?r.canary:r;if($(e)){const r=s.url,{assetsDir:n,manifestPath:i}=function({mfName:e,assetsDir:t,manifestPath:r}){if(!$(e))return{assetsDir:t,manifestPath:r};const s=j(),{endpoint:n,version:i}=s[e]||{};if(n)return{assetsDir:n,manifestPath:`${n}/asset-manifest.json`};if(i){if(r)return{assetsDir:t,manifestPath:`${r.split("asset-manifest")[0]}/asset-manifest.${i}.json`};const e=t.lastIndexOf("/"),s=`${t.substring(0,e+1)}${i}`;return{assetsDir:s,manifestPath:`${s}/asset-manifest.json`}}return{assetsDir:t,manifestPath:r}}({mfName:e,assetsDir:r,manifestPath:s.url}),a=new xe({name:e,initConfig:{type:je.WithAssetsDir,assetsDir:n,manifestPath:i},version:s.version,skeletonContext:this.context,isLocal:!0});return void t.set(e,a)}const n=new xe({name:e,initConfig:{type:je.WithAssetsData,assetsDir:s.url,manifest:s},version:s.version,skeletonContext:this.context});t.set(e,n)}));const i=Object.entries(n).map((([e,t])=>({globalName:e,url:t})));r.addKnownDependencies(i)}handlePreloadedMfs(e){Object.entries(e).forEach((([e,t])=>{const r=new xe({name:e,skeletonContext:this.context,initConfig:{type:je.Preloaded,entrypoints:t}});this.mfs.set(e,r)}))}getLocalMfAssetsDir(e){const{endpoint:t}=$(e)&&j()[e]||{};if(!t)throw this.emitEvent(R.MFNotInList,{mfName:e}),new Error(`'${e}' does not exist in Micro frontends list`);return t}get testOverridesQueryParams(){return K(this.mfTestVersion)}get prodOverridesQueryParams(){return K(this.mfProdVersion)}}const Be={BIGBRAIN:"bigbrain",NAVIGATION:"navigation",PUSHER:"pusher",INDEXED_DB:"indexed_db",REDUX_NO_SPAM:"redux_no_spam",VULCAN_LOGGER_MIDDLEWARE:"vulcan_logger_middleware",WEB_WORKER:"web_worker",FULL_STORY:"full_story",MF_CONTEXT_STORE:"mf_context_store",MF_ROUTER:"mf_router",MF_SKELETON:"mf_skeleton",MF_CONTAINER:"mf_container",MF_PACKAGE:"mf_package",MF_TABLE:"mf_table",MF_API:"mf_api",MAIN_INIT:"main_init",TAB_STATUS:"tab_status",BOARD_AGGREGATION:"board_aggregation",DEFERRED_CALLBACK:"deferred_callback"};new Set(Object.values(Be));let We,Ve;function Ge(e){e&&async function(){return We||(We=i.e(76607).then(i.bind(i,834220)).then((e=>e.translationsService)),Ve=await We),We}().then((t=>{t.addToTranslations(e)}))}function Qe(e,t){return Ve.translateObj(e,t)}function Je(){return window.Pulse.locale_data_mapping}const ze=()=>null;async function Ke(t){let r=!1;function s(){r||(r=!0,window.mondayHelpers.onLogsAvailable((e=>{e.breadcrumb(Be.MF_PACKAGE,`load package ${t.MF_NAME}`,{mf_name:t.MF_NAME})})),ge(t.MF_NAME).resolve())}t.WINDOW_VARIABLES.forEach((e=>{if(!window[e]){let r=0;window[e]=new Proxy({},{get:(e,s)=>(e[s]||(r++,r<3&&window.mondayHelpers.onLogsAvailable((e=>{e.error(new Error(`Accessing mf window ${t.MF_NAME} without initiating. Accessing property "${s}"`),{},{sourceType:we,tags:{[_e.MF_NAME]:t.MF_NAME}})}))),e[s]||ze)})}}));try{const r=new He({api:{options:{canFeature:function(e){return window?.Pulse?.features?.[e]},translate:function(...e){if(!window._t)throw new Error(`[PACKAGE MF ${t.MF_NAME}] window._t is not defined`);return window._t(...e)},getEnvironment:n},translationsService:e,onDone:()=>{s()},onError:e=>{window.mondayHelpers.onLogsAvailable((r=>{r.error(new Error(e),{},{sourceType:we,tags:{[_e.MF_NAME]:t.MF_NAME}})})),s()},api:{}},isDev:!0,preloadedMFs:{},mfUrl:window.MicrofrontendsInitData?.microfrontendUrl,onEvent:e=>{if(e===R.ErrorLoadingJSAsset)throw window.mondayHelpers.onLogsAvailable((e=>{e.error(new Error(`Failed to initialize ${t.MF_NAME}. Could not load ${t.MF_NAME} components JS asset`),{},{sourceType:we,tags:{[_e.MF_NAME]:t.MF_NAME}})})),new Error(`could not load ${t.MF_NAME} components JS asset`)},host:Object.defineProperty({name:"monolith"},"environment",{get:n})});r.preFetchMF(t.MF_NAME),await window.mondayHelpers.deferredInit.waitForDependencies(`${t.MF_NAME}_wait_for_vulcan`,[window.mondayHelpers.deferredInit.deferredScripts.VULCAN_MF_INIT],!0),await r.initMF(t.MF_NAME,(e=>{"SCRIPT"===e.tagName&&(e.async=!0),document.head.appendChild(e)}))}catch(e){window.mondayHelpers.onLogsAvailable((e=>{e.error(new Error(`Failed to initialize ${t.MF_NAME}`),{},{sourceType:we,tags:{[_e.MF_NAME]:t.MF_NAME}})})),s()}function n(){return window.__ENVIRONMENT__}}async function Ye(e){try{!async function(){await Promise.all([Ke(t),Ke(r)])}(),await function(e,t,r="Operation timed out"){let s,n=!1;return new Promise(((i,a)=>{e().then((e=>{n||(n=!0,clearTimeout(s),i(e))})).catch((e=>{n||(n=!0,clearTimeout(s),a(e))})),s=setTimeout((()=>{n||(n=!0,a(new Error(r)))}),t)}))}((()=>ge(e.MF_NAME).promise),6e3,`Timeouted Loading ${e.MF_NAME} after 6000ms`)}catch(t){window.mondayHelpers.onLogsAvailable((r=>{r.error(t,{},{sourceType:we,tags:{[_e.MF_NAME]:e.MF_NAME}})}))}}const Xe=(e=!1)=>{window.mondayHelpers.runWithRetries||(window.mondayHelpers.runWithRetries=async(e,{retries:t=3,interval:r=100,onError:s=null,onFinish:n=null})=>{const i=performance.now();let a=null;for(let o=0;o<t;o++)try{const t=await e();return n&&n(i,!0),t}catch(e){a=e,s&&s(e,o+1),await new Promise((e=>setTimeout(e,r)))}if(a)throw n&&n(i,!1),a}),f();const t=[{name:"grantedFeatures",promise:_()},{name:"ignite",promise:b()},{name:"layoutVariables",promise:g()},{name:"currentEntities",promise:u()},{name:"packageMfInit",promise:qe()}];return window.mondayHelpers.deferredInit.manuallyMarkScriptAsStarted(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_MF_PRELOAD_INIT),le().catch((e=>de(e))),e?(pe(),me(performance.now())):(window.mondayHelpers.deferredInit.manuallyMarkScriptAsStarted(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_BLOCK_SCREENS_INIT),window.mondayHelpers.deferredInit.deferStartup(window.mondayHelpers.deferredInit.deferredScripts.INBOX_COUNT_INIT,fe,[!window.Pulse.is_spp&&window.mondayHelpers.deferredInit.deferredScripts.MAIN_INIT]),function(){try{if(window.URLSearchParams){const e=new URLSearchParams(window.location.search).get("theme");e&&(Array.from(document.body.classList.values()).forEach((e=>{e.includes("app-theme")&&document.body.classList.remove(e)})),document.body.classList.add(`${e}-app-theme`))}}catch(e){console.error("Error in mobileThemeInit",e)}}(),(()=>{const e=performance.now();if(!window.Pulse?.is_spp)return window.mondayHelpers.runWithRetries(he,{retries:3,interval:100,onError:(e,t)=>{console.error(`Failed fetching block screens data ${t} times`)}}).then((t=>{window.mondayHelpers.blockScreensData=t,t.is_any_block_screen_shown&&(window.DesktopApp=t.desktop_app_data),pe(e)})).catch((t=>{throw console.error("Failed fetching block screens data",t),pe(e),t}));pe(e)})()),t};async function qe(){try{window.mondayHelpers.deferredInit.manuallyMarkScriptAsStarted(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_MF_PACKAGE_INIT),await Ye(t)}catch(e){console.error(e),window.mondayHelpers.logError(e,{info:"Failed to init package mf"})}finally{window.mondayHelpers.deferredInit.markScriptAsFinished(window.mondayHelpers.deferredInit.deferredScripts.CLIENT_INIT_MF_PACKAGE_INIT)}}(async()=>{const e=performance.now(),t=Xe(!0);await async function(e,t=!1,r){const s=e.map((e=>e.promise)),n=await Promise.allSettled(s),i=n.findIndex((({status:e})=>"rejected"===e)),a=t?"lite_client_init_promise":"client_init_promise";if(-1!==i){const s=e[i].name,o=n[i].reason,c=`Failed fetching ${t?"lite client init":"client init"} with promise: ${s}. Error = ${o?.message||o}`;console.error(c),window.mondayHelpers.logError(new Error(c),{reason:o}),window.mondayHelpers.deferredInit.resolveInitPromise(a,{isSuccess:!1,error:{message:c},stopLoadClient:!0,startTime:r})}else window.mondayHelpers.deferredInit.resolveInitPromise(a)}(t,!0,e)})()})()})();