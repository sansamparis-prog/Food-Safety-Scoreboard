try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="87c6f7f3-9d8a-4fb7-97ca-ab5f9b4989f4",e._sentryDebugIdIdentifier="sentry-dbid-87c6f7f3-9d8a-4fb7-97ca-ab5f9b4989f4")}catch(ri){}let e;function t(){if(!e)throw new Error('API was not set yet, using the API is only possible after the "init" function has been called');return e}var n,i,r,o,s,a,c,l,u,d,f,p,h,g,m,_,y,v,w,S,E;(i=n||(n={}))[i.OwnersOnly=30]="OwnersOnly",i[i.StructureAndContent=20]="StructureAndContent",i[i.ContentOnly=10]="ContentOnly",i[i.Assignee=5]="Assignee",i[i.ReadOnly=0]="ReadOnly",(o=r||(r={}))[o.Public=1]="Public",o[o.Closed=2]="Closed",o[o.Hidden=3]="Hidden",o[o.Template=4]="Template",(a=s||(s={})).Board="board",a.Workspace="workspace",a.Overview="overview",a.Item="item",a.Group="group",a.User="user",a.File="file",a.Folder="folder",a.Doc="doc",(l=c||(c={})).Yearly="yearly",l.Monthly="monthly",l.Biennially="two_yearly",(d=u||(u={})).Core="core",d.CRM="crm",d.Marketing="marketing",d.Software="software",d.ProjectManagement="project_management",d.Forms="forms",d.Whiteboard="whiteboard",d.Knowledge="knowledge",d.Workflows="workflows",(p=f||(f={})).CORE="10093110",p.CRM="10071386",p.SOFTWARE="10093550",u.Core,u.CRM,u.Marketing,u.Software,u.ProjectManagement,u.Forms,u.Whiteboard,u.Knowledge,u.Workflows,(g=h||(h={})).CUSTOM="custom",g.STATIC="static",g.APP="app_recipe",(_=m||(m={})).MONDAY="monday",_.APPS="apps",(y||(y={})).HIPAA="hipaa",(w=v||(v={})).crmGlobalSettings="CRM_SETTINGS",w.whatIsNewPane="WHAT_IS_NEW",w.appColumnExtension="APP_COLUMN_EXTENSION",w.appFeature="APP_FEATURE",w.devTeamSettings="DEV_TEAM_SETTINGS",w.leadsExpert="LEADS_EXPERT",(E=S||(S={})).MY_PERMISSIONS="my-permissions",E.DEFAULT="default";var A='"mf-growth-rollout"';const b=e=>window?.microfrontends?.mfsGlobalApis?.[e?.replaceAll('"',"")],C=(e,t=!1)=>{const n=A;if(!b(n)||t){((e,t)=>{var n;const i=e?.replaceAll('"',"");window.microfrontends||(window.microfrontends={}),(n=window.microfrontends).mfsGlobalApis||(n.mfsGlobalApis={}),window.microfrontends.mfsGlobalApis[i]=t})(n,e())}return b(n)};("undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"5b89bbd38340bba247003b6a1ba4579012436a5f"};var I=(e=>(e.AND="AND",e.OR="OR",e))(I||{});function T(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R,N,O,U,k={exports:{}},x={},L={exports:{}},M={};function V(){return N||(N=1,L.exports=function(){if(R)return M;R=1;
/**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
var e=globalThis["React-18"],t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,i=e.useEffect,r=e.useLayoutEffect,o=e.useDebugValue;function s(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!t(e,i)}catch(r){return!0}}var a="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),c=n({inst:{value:a,getSnapshot:t}}),l=c[0].inst,u=c[1];return r((function(){l.value=a,l.getSnapshot=t,s(l)&&u({inst:l})}),[e,a,t]),i((function(){return s(l)&&u({inst:l}),e((function(){s(l)&&u({inst:l})}))}),[e]),o(a),a};return M.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:a,M}()),L.exports}const D=T((U||(U=1,k.exports=function(){if(O)return x;O=1;
/**
   * @license React
   * use-sync-external-store-shim/with-selector.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
var e=globalThis["React-18"],t=V(),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=t.useSyncExternalStore,r=e.useRef,o=e.useEffect,s=e.useMemo,a=e.useDebugValue;return x.useSyncExternalStoreWithSelector=function(e,t,c,l,u){var d=r(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=s((function(){function e(e){if(!o){if(o=!0,i=e,e=l(e),void 0!==u&&f.hasValue){var t=f.value;if(u(t,e))return r=t}return r=e}if(t=r,n(i,e))return t;var s=l(e);return void 0!==u&&u(t,s)?t:(i=e,r=s)}var i,r,o=!1,s=void 0===c?null:c;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]}),[t,c,l,u]);var p=i(e,d[0],d[1]);return o((function(){f.hasValue=!0,f.value=p}),[p]),a(p),p},x}()),k.exports)),P={},B=globalThis["React-18"],{useDebugValue:z}=B,{useSyncExternalStoreWithSelector:j}=D;let F=!1;const $=e=>e;const Q=e=>window?.microfrontends?.vulcanStores?.[e?.replaceAll('"',"")],G={},q=((e,t)=>{const n=((e,t)=>new Proxy(G,{get(n,i){if("__esModule"===i)return n[i];const r=e();if(!r)throw new Error("Trying to access Vulcan instance before it was initialized on the window");return"useSelector"===i?t:"useQuery"===i?r.useQueryHookFactory(t):r[i]}}))((()=>Q(e)),(n=>t(Q(e),n)));return n})("mf-vulcan",(function(e,t=$,n){"production"!==(P?"production":void 0)&&n&&!F&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),F=!0);const i=j(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return z(i),i})),H="[mf-growth-rollout]",W=()=>window.enableGrowthRolloutLogging||!("production"===window.__ENVIRONMENT__),Y=(...e)=>{if(!W())return;const[t,...n]=e;console.log(`${H} ${t}`,...n)},J=(...e)=>{if(!window.enableGrowthRolloutLoggingDebug)return;const[t,...n]=e;console.debug(`${H} ${t}`,...n)},K=(...e)=>{if(!W())return;const[t,...n]=e;console.warn(`${H} ${t}`,...n)},X=(...e)=>{const[n,...i]=e;t().loggerService.error(`${H} ${n}`,...i),W()&&console.error(`${H} ${n}`,...i)};var Z=(e=>(e.EQUALS="equals",e.IN="in",e.CONTAINS="contains",e.GREATER_THAN="greaterThan",e.LESS_THAN="lessThan",e))(Z||{}),ee=(e=>(e.USER_ROLE="userRole",e.USER_GOAL="userGoal",e.USER_EMAIL="userEmail",e.IS_AI_VISIBLE_TO_ACCOUNT="isAiVisibleToAccount",e.FEATURE_FLAG="featureFlag",e.AB_TEST="abTest",e.ACTIVE_PRODUCT="activeProduct",e.ACTIVE_BOARD="activeBoard",e.NTH_JOINER="nthJoiner",e.ACCOUNT_AGE="accountAge",e.CHURN_RISK_LEVEL="churnRiskLevel",e.IS_FIRST_USER="isFirstUser",e.IS_COUNTRY="isCountry",e.ACCOUNT_MEMBERS_COUNT="accountMembersCount",e.PAYMENT_CURRENCY="paymentCurrency",e.HAS_SEEN_TIPSEEN="hasSeenTipseen",e.IS_IN_IFRAME="isInIframe",e.MID_TOUCH="midTouch",e.IGNITE_FLAG="igniteFlag",e.IS_IN_TRIAL="isInTrial",e.PERMISSION_TO_USE_AI="permissionToUseAi",e))(ee||{});const te={admin:1,member:2,viewer:3,guest:4},ne={name:ee.USER_ROLE,selector:e=>e.currentUser?.role?.id??null,evaluator:(e,t,n)=>{if(t===Z.EQUALS){return te[n]===e}if(t===Z.IN){return n.map((e=>te[e])).includes(e)}return!1}};const ie={name:ee.ACTIVE_PRODUCT,selector:e=>function(e){return q.accountProductsEntities.selectors.selectActiveAccountProduct(e)}(e)?.derived_kind??null,evaluator:(e,t,n)=>t===Z.EQUALS?e===n:t===Z.IN&&n.includes(e)};var re=e=>Array.isArray(e)?e:[e];function oe(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var se="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function ae(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:i}=t;let r,o=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const i=e.get(n);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=i}else{let e=t.p;null===e&&(t.p=e=new Map);const i=e.get(n);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=i}}const a=t;let c;if(1===t.s)c=t.v;else if(c=e.apply(null,arguments),o++,i){const e=r?.deref?.()??r;null!=e&&i(e,c)&&(c=e,0!==o&&o--);r="object"==typeof c&&null!==c||"function"==typeof c?new se(c):c}return a.s=1,a.v=c,c}return s.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function ce(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,i=(...e)=>{let t,i=0,r=0,o={},s=e.pop();"object"==typeof s&&(o=s,s=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);const a={...n,...o},{memoize:c,memoizeOptions:l=[],argsMemoize:u=ae,argsMemoizeOptions:d=[]}=a,f=re(l),p=re(d),h=oe(e),g=c((function(){return i++,s.apply(null,arguments)}),...f),m=u((function(){r++;const e=function(e,t){const n=[],{length:i}=e;for(let r=0;r<i;r++)n.push(e[r].apply(null,t));return n}(h,arguments);return t=g.apply(null,e),t}),...p);return Object.assign(m,{resultFunc:s,memoizedResultFunc:g,dependencies:h,dependencyRecomputations:()=>r,resetDependencyRecomputations:()=>{r=0},lastResult:()=>t,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:c,argsMemoize:u})};return Object.assign(i,{withTypes:()=>i}),i}var le=ce(ae),ue=Object.assign(((e,t=le)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,i)=>(e[n[i]]=t,e)),{})))}),{withTypes:()=>ue});const de=()=>{const e=(()=>{const e=document.querySelector("meta[name=csrf-token]");return e?.content})();return e?{"X-CSRF-Token":e}:{}},fe="GET";const pe=async(e,t,n=null,i={})=>{e=(e=>e?.toUpperCase())(e);const r=window.Pulse?.Globals?.build_timestamp,o={"X-BT":r,...i?.headers};!function(e){Object.assign(e,de())}(o);const s={method:e,headers:o};if(i.formData)s.body=n;else if(s.headers["Content-Type"]="application/json",e!==fe)s.body=function(e,t){return t&&e!==fe?JSON.stringify(t):t}(e,n);else{const e=n?.params,i=function(e){if(!e)return"";const t=new URLSearchParams;for(const n in e){const i=e[n];void 0!==i&&(Array.isArray(i)?i.forEach((e=>t.append(n,e))):t.append(n,i))}return t.toString()}(e);i&&(t.endsWith("?")&&(t=t.slice(0,-1)),t.includes("?")?t+=`&${i}`:t+=`?${i}`)}const a=await fetch(t,s);return await async function(e){if(!e.ok){let t,n,i;try{const i=e.clone();n=await i.json(),t=n.message||n.error||JSON.stringify(n)}catch{t=e.statusText}switch(e.status){case 404:throw new Error(`404, Not found: ${t}`);case 500:throw i=new Error(`500, Internal server error: ${t}`),i.errorData=n,i;default:throw new Error(`HTTP error! status: ${e.status}, message: ${t}`)}}}(a),i.skipJsonResponse?a:a.json()};const he=(ge=fe,(e,t=null,n={})=>pe(ge,e,t,n));var ge;const me=new class{logError(e,t,n){try{if("undefined"!=typeof window){const i={action:t,key:n},r={sourceType:"ignite-client-sdk"};window.mondayHelpers?.onLogsAvailable?.((t=>{t.error(e,i,r)}))}}catch(ri){console.error("Error logging error",ri)}}async init(e){const{endpoint:t,forceRefresh:n,anonymousMode:i}=e||{};if(!this.isInitialized()||n){if("undefined"!=typeof window&&(window.Pulse=window.Pulse||{},window.Pulse.ignite||(window.Pulse.ignite={flags:{},configVariables:{}}),!i&&!window.Pulse.is_spp)){const e=await he(t||"/layout/current_user_ignite_data");window.Pulse.ignite.flags=e.flags||{},window.Pulse.ignite.configVariables=e.configVariables||{}}this.mergeFlagsIfNeeded(window.Pulse?.ignite?.flags)}}isReleased(e){return this.isInitialized()?!!this.getIgniteState()?.flags[e]:(this.logError("IgniteClientSDK is not initialized","isReleased",e),!1)}getConfigVariable(e,t){if(!this.isInitialized())return this.logError("IgniteClientSDK is not initialized","getConfigVariable",e),t;const n=this.getIgniteState()?.configVariables;return n&&e in n?n[e]:t}isInitialized(){return"undefined"!=typeof window&&!!window.Pulse?.ignite?.flags&&!!window.Pulse?.ignite?.configVariables}getIgniteState(){return window?.Pulse?.ignite}mergeFlagsIfNeeded(e){try{if(!window.BigBrainExtensionTrackOnClientSide||!e)return;JSON.parse(localStorage.getItem("override_ignite_flags")||"[]").forEach((t=>{e[t]=!0}));JSON.parse(localStorage.getItem("disabled_ignite_flags")||"[]").forEach((t=>{e[t]=!1}))}catch(ri){this.logError(ri,"mergeMondayToolsFlags")}}},_e=()=>"undefined"!=typeof window&&(window?.VulcanInitData?.features?.vulcanTtlSelectorCache??!1);var ye,ve;(ve=ye||(ye={}))[ve.RunOnce=0]="RunOnce",ve[ve.Batch=1]="Batch";function we(e,t){return e===t}(()=>{const e=new Map;let t=null;const n=()=>{const n=Array.from(e.values());e.clear(),t=null,n.forEach((e=>e()))},i=()=>{t||(t=me.isInitialized()&&me.isReleased("vulcan_syncer_use_animation_frame")?new Promise((e=>{requestAnimationFrame((()=>{n(),e()}))})):Promise.resolve().then((()=>{n()})))}})(ye.RunOnce);const Se=new class{constructor(e){this.trackerGetter=e}trackTtlCacheEvent(e,t={}){if(!this.trackerGetter)return;const n=this.trackerGetter();n?.("track",e,{source:"vulcan-core",...t})}trackEvent(e,t,n={}){if(!this.trackerGetter)return;const i=this.trackerGetter();i?.("track",t,{source:e,...n})}}(("undefined"==typeof window?{}:window.VulcanInitData?.servicesInitParams||{}).getBigBrainTracker),Ee=e=>{const t=(e=>{if("undefined"!=typeof window)return me.getConfigVariable(e,void 0)})("vulcan_ttl_selector_cache_settings");if(!t||!t.percent)return;const n=(()=>{if("undefined"!=typeof window)try{return window.Pulse?.current_account?.id}catch(e){return}})(),i=(()=>{if("undefined"!=typeof window)try{return window.Pulse?.current_user?.id}catch(e){return}})();if(!n&&!i)return;if(t.user&&i){const e=t.user[i];if(e)return e}if(t.account&&n){const e=t.account[n];if(e)return e}const r=t?.percent,o=Object.keys(r).map(Number).filter((e=>!isNaN(e))).sort(((e,t)=>e-t));for(const s of o)if(e<=s)return r[s]},Ae=e=>{if(e)return`${e?.selectorName}|${e?.sliceName}|${e?.instanceIdentifier?.id}`};class be{constructor({size:e,sliceName:t,selectorName:n,resultEqualityCheck:i,originalMemoize:r,itemsRegistry:o,instanceIdentifier:s,trigger:a,timings:c}){this.itemsRegistry=[],this.size=e,this.sliceName=t??"unknown",this.selectorName=n??"unknown",this.instanceIdentifier=s??"unknown",this.key=Ae({selectorName:n,sliceName:t,instanceIdentifier:{id:s}})??"unknown|unknown|unknown",this.trigger=a?{[a]:1}:{},this.timings=c,this.resultEqualityCheck=i,this.originalMemoize=r,this.itemsRegistry=o,this.gcCount=0,this.resultsCount=r.resultsCount()}static create({value:e,originalMemoize:t,resultEqualityCheck:n,sliceName:i,selectorName:r,instanceIdentifier:o,trigger:s,timings:a}){if(null!==e&&"object"==typeof e){const c=new WeakRef(e);return new be({itemsRegistry:[c],size:1,resultEqualityCheck:n,originalMemoize:t,sliceName:i,selectorName:r,instanceIdentifier:o,trigger:s,timings:a})}}removeValueFromRegistry(e){const t=this.itemsRegistry.findIndex((t=>t===e));-1!==t&&(this.itemsRegistry.splice(t,1),this.updateItemsRegistrySize(),this.gcCount++)}getTimings(){return this.timings?`${this.timings.max.toFixed(4)},${this.timings.total.toFixed(4)},${this.timings.average.toFixed(4)}`:"N/A"}isValueInRegistry(e){return this.itemsRegistry.some((t=>{const n=t.deref?.();return this.resultEqualityCheck?this.resultEqualityCheck(n,e):n===e}))}addValueToRegistry(e,t){if(null!==e&&"object"==typeof e){const n=new WeakRef(e);this.itemsRegistry.push(n),this.updateItemsRegistrySize(),this.updateResultsCount();const i=t?.trigger??"unknown";this.trigger[i]=(this.trigger[i]??0)+1,t?.timings&&(this.timings=t.timings),be.finalizationRegistry.register(e,{ref:n,handler:e=>this.removeValueFromRegistry(e)},n)}}clearRegistry(){this.itemsRegistry.forEach((e=>{be.finalizationRegistry.unregister(e)})),this.itemsRegistry=[],this.size=0,this.originalMemoize.clearCache()}groom(){for(let e=this.itemsRegistry.length-1;e>=0;e--){const t=this.itemsRegistry[e];void 0===t.deref()&&(be.finalizationRegistry.unregister(t),this.itemsRegistry.splice(e,1))}this.updateItemsRegistrySize()}updateItemsRegistrySize(){this.size=this.itemsRegistry.length}updateResultsCount(){this.resultsCount=this.originalMemoize.resultsCount()}}be.finalizationRegistry=new FinalizationRegistry((({ref:e,handler:t})=>{t(e)}));var Ce={};const Ie=3e5;class Te{constructor(){this.totalSize=0,this.totalTimings={max:0,average:0,total:0},this.cacheSettingsKey=0,this.cacheSettingsInitialized=!1,this.verbose=!1,this.shouldTrackTtlCacheEvent=!1,this.eventIndex=0,this.isTabVisible=!0,this.pendingFlush=!1,this.lastFlushTime=0,this.minimalFlushInterval=Ie,this.map=new Map,this.totalSize=0,this.totalTimings={max:0,average:0,total:0},this.lastFlushTime=Date.now(),this.cacheSettingsKey=Math.floor(100*Math.random()),this.initializeVisibilityTracking()}static getInstance(e){return Te.instance&&!e||(Te.instance=new Te),Te.instance}getTotalSize(){return this.totalSize}clearCacheEntry(e){const t=this.map.get(e);t&&t.clearRegistry()}isAttributionValid(e){return!!(e?.attribution&&e?.attribution?.sliceName&&e?.attribution?.selectorName&&e?.attribution?.trigger)}cacheResult(e,t,n){if(this.setCacheSettings(),!this.shouldTrackTtlCacheEvent||!this.isAttributionValid(n))return;this.instanceIdentifier=n?.attribution?.instanceIdentifier?.id;const i=Ae(n?.attribution);let r=this.get(i);r&&t.resultsCount()>r.resultsCount?r.addValueToRegistry(e,n?.attribution):r||(r=be.create({value:e,originalMemoize:t,resultEqualityCheck:n?.resultEqualityCheck,sliceName:n?.attribution?.sliceName,selectorName:n?.attribution?.selectorName,instanceIdentifier:n?.attribution?.instanceIdentifier?.id,trigger:n?.attribution?.trigger,timings:n?.attribution?.timings}),r&&this.set(i,r)),r&&0===r.size&&this.delete(r),this.pendingFlush=!0}setCacheSettings(){if(!this.cacheSettingsInitialized){const e=Ee(this.cacheSettingsKey);e&&(this.cacheSettingsInitialized=!0,this.shouldTrackTtlCacheEvent=Math.random()<e.track_ratio||!1,this.verbose=e.verbose||!1,this.minimalFlushInterval=e.minimal_flush_interval||Ie)}const e=Ce.VULCAN_STORE_INSTANCE_IDENTIFIER?.replaceAll('"',"");if(e){const t=window?.microfrontends?.vulcanStores?.[e];t&&!t.__vulcanTtlOrderedCache__&&(t.__vulcanTtlOrderedCache__=this)}}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t)}delete(e){return!!e&&(e.clearRegistry(),this.map.delete(e.key))}updateTotalSizeAndTimes(){let e=0;const t={max:0,average:0,total:0};for(const n of this.map.values())e+=n.size,n.timings&&(t.max+=n.timings.max,t.average+=n.timings.average,t.total+=n.timings.total);this.totalSize=e,this.totalTimings=t}reset(){this.map.forEach((e=>e.clearRegistry())),this.map.clear(),this.totalSize=0,this.totalTimings={max:0,average:0,total:0}}groomCache(){this.map.forEach((e=>{e.groom(),0===e.size&&this.delete(e)}))}flushAndGroomCache(){const e=performance.now();if(this.isTabVisible||!this.shouldTrackTtlCacheEvent)return!1;if(this.groomCache(),this.updateTotalSizeAndTimes(),this.eventIndex++,this.verbose){const e=Array.from(this.map.values()).filter((e=>"unknown"!==e.sliceName)),t=Math.ceil(e.length/15);for(let n=0;n<t;n++){const t=15*n,i=e.slice(t,t+15).reduce(((e,t)=>(e[t.selectorName]={size:t.size,resultsCount:t.resultsCount,gcCount:t.gcCount,instance:t.instanceIdentifier,slice:t.sliceName,trigger:Object.entries(t.trigger).map((([e,t])=>`${e}_${t}`)).join(","),timings:t.getTimings()},e)),{});Se.trackTtlCacheEvent("VULCAN_CACHE_COUNT_VERBOSE",{info1:"VULCAN_MEMOIZATION_CACHE_SELECTOR_BATCH",kind:`batch_${n+1}`,data:{entries:i,batchSize:15,totalEntries:e.length,eventIndex:this.eventIndex,eventVersion:2.6}})}}const t=performance.now()-e;return Se.trackTtlCacheEvent("VULCAN_CACHE_COUNT",{info1:"VULCAN_MEMOIZATION_CACHE",data:{totalSize:this.totalSize,totalTimingsMs:`max: ${this.totalTimings.max}, average: ${this.totalTimings.average}, total: ${this.totalTimings.total}`,flushDurationMs:t,instance:this.instanceIdentifier,eventIndex:this.eventIndex,eventVersion:2,eventVerboseVersion:2.6}}),!0}initializeVisibilityTracking(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",(()=>{if(this.isTabVisible="visible"===document.visibilityState,!this.isTabVisible&&this.pendingFlush){const e=Date.now();if(e-this.lastFlushTime<this.minimalFlushInterval)return;this.flushAndGroomCache()&&(this.lastFlushTime=e,this.pendingFlush=!1)}}))}}const Re="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Ne(e,t){const n=Te.getInstance(),i=Ae(t?.attribution),r=function(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:i}=t;let r,o=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const i=e.get(n);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=i}else{let e=t.p;null===e&&(t.p=e=new Map);const i=e.get(n);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=i}}const a=t;let c;if(1===t.s)c=t.v;else if(c=e.apply(null,arguments),o++,i){const e=r?.deref?.()??r;null!=e&&i(e,c)&&(c=e,0!==o&&o--),r="object"==typeof c&&null!==c||"function"==typeof c?new Re(c):c}return a.s=1,a.v=c,c}return s.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}(e,t);function o(){t?.attribution&&(t.attribution.trigger="deprecated");const e=r.apply(null,arguments);return null!==e&&"object"==typeof e&&n.cacheResult(e,r,t),e}return o.clearCache=()=>{r.clearCache(),n.clearCacheEntry(i)},o.resultsCount=()=>r.resultsCount(),o.resetResultsCount=()=>r.resetResultsCount(),o}function Oe(e,t){return(...n)=>{const i=performance.now(),r=e(...n);return function(e,t){t.timings?(t.timings.count+=1,t.timings.total+=e,t.timings.min=Math.min(t.timings.min,e),t.timings.max=Math.max(t.timings.max,e),t.timings.average=t.timings.total/t.timings.count):t.timings={min:e,max:e,average:e,count:1,total:e}}(performance.now()-i,t),r}}function Ue(...e){const[t,n]=(e=>{const t={};return[ce({memoize:_e()?Ne:ae,memoizeOptions:{resultEqualityCheck:e,attribution:t},argsMemoize:ae}),t]})(we);if(_e()){const i=[...e],r=i[i.length-1],o="object"==typeof r&&null!==r&&!Array.isArray(r)&&"function"!=typeof r;let s;s=Array.isArray(i[0])?1:o?i.length-2:i.length-1;const a=i[s];i[s]=Oe(a,n);const c=t(...i);return c.attribution=n,c}const i=t(...e);return i.attribution=n,i}const ke=e=>q.allBoardViews.selectors.selectCurrentBoardId(e),xe=e=>q.allBoardSubsetsViews.selectors.selectOpenBoardSubsetId(e,"currentBoard"),Le=e=>{const t=xe(e);return null!=t?q.boardSubsetsEntities.selectors.selectBoardSubsetCurrentBoardViewIdById(e,t):void 0},Me=Ue([ke,e=>q.overviewViews.selectors?.selectMainOverviewId(e),e=>{const t=ke(e);return null!=t?q.boardsEntities.selectors.selectBoardAppFeatureId(e,t):void 0},xe,Le,e=>{const t=xe(e);return null!=Le(e)&&null!=t?q.boardSubsetsEntities.selectors.selectBoardSubsetVisualEntityType(e,t):"BoardView"}],((e,t,n,i,r,o)=>({boardId:e,overviewId:t,appFeatureId:n,openBoardSubsetId:i,boardViewId:r,boardViewType:o}))),Ve={name:ee.ACTIVE_BOARD,selector:Me,evaluator:(e,t,n)=>{if(!e||0===Object.keys(e).length)return!1;const i=(e=>{if(e.overviewId)return"overview";if(e.appFeatureId)return"workflow";if(e.boardId){if(!e.openBoardSubsetId)return"table";if(!e.boardViewId)return"table";if("BoardView"===e.boardViewType)return"table"}return null})(e);return t===Z.EQUALS?i===n:t===Z.IN&&(!!i&&n.includes(i))}},De={name:ee.IS_AI_VISIBLE_TO_ACCOUNT,evaluator:(e,n,i)=>{const r=t().aiService.isAiVisibleInAccount();if(n===Z.EQUALS)return r===i;throw new Error("Is AI visible to account evaluator only supports equals operator")}},Pe={name:ee.NTH_JOINER,selector:e=>Boolean(e.currentUser?.serial_number&&e.currentUser?.serial_number>1),evaluator:(e,t,n)=>{if(t===Z.EQUALS)return e===n;throw new Error("Nth joiner evaluator only supports equals operator")}},Be={name:ee.AB_TEST,evaluator:(e,n,i,r)=>{if(n!==Z.EQUALS)throw new Error("Operator not supported");if(r?.isInTestCheck)return Y("For AB Test: ",i.name," checking if `isInTest`..."),t().permissionsService.isInTest(i,{sendBigBrainEvent:r?.bigBrainEvent??!1,useCookie:r?.useCookie??!1});const o=t().permissionsService.getAbTestVariant(i.name);return!0===r?.bigBrainEvent&&Y(`enterTest: calling shouldSeeTest with test name: ${i.name}, new version: ${i.newVersion}, for variant: ${o}`),t().permissionsService.shouldSeeTest(i,r?.bigBrainEvent??!1)}};ee.AB_TEST;const ze={name:ee.FEATURE_FLAG,evaluator:(e,n,i)=>{if(n===Z.EQUALS)return t().permissionsService.canFeature(i);throw new Error("Feature flag evaluator only supports equals operator")}};function je(e){return JSON.stringify(e)}const Fe=864e5;async function $e(e,t=Fe){const n=je(e),i=q.getState(),r=i?.bigBrainDataAPIFeatures?.[n],o=function(e,t){if(!t)return!0;e=e||Fe;const n=Date.parse(t);return!Number.isFinite(n)||Date.now()-n>e}(t,r?.lastRefreshedAt);J("Refreshing BigBrainBridge feature: ",e.featureName," with filters: ",e.filters),await q.bigBrainDataAPIFeatures.queries.get(e).wait({force:o})}const Qe="churn_risk_all_v2",Ge={name:ee.CHURN_RISK_LEVEL,prefetchVulcanState:async()=>{const e=q.currentAccount.getState()?.id??null;e&&await $e({featureName:Qe,filters:{pulse_account_id:String(e)}},36e5)},evaluator:(e,t,n)=>{const i=q.getState(),r=i?.currentAccount?.id??null;if(!r||!i)return!1;const o=je({featureName:Qe,filters:{pulse_account_id:String(r)}}),s=i.bigBrainDataAPIFeatures[o]?.data??[],a=s[0]?.churn_risk_level??null;return!!a&&(t===Z.EQUALS?a===n:t===Z.IN&&n.includes(a))}},qe={name:ee.USER_GOAL,selector:e=>e.currentAccount?.survey_user_goal??null,evaluator:(e,t,n)=>t===Z.EQUALS?n===e:t===Z.IN&&n.includes(e)},He={name:ee.IS_FIRST_USER,selector:e=>Boolean(e.currentUser?.serial_number&&1===e.currentUser?.serial_number),evaluator:(e,t,n)=>{if(t===Z.EQUALS)return e===n;throw new Error("First user evaluator only supports equals operator")}},We={name:ee.PERMISSION_TO_USE_AI,selector:e=>(e=>{const t=q.allBoardViews.selectors.selectCurrentBoardId(e);return t&&"string"==typeof t?+t:t||null})(e),evaluator:(e,n,i)=>{try{if("boolean"!=typeof i)throw new Error("Has permissions to use AI evaluator only supports boolean expected value");if(n!==Z.EQUALS)throw new Error("Has permissions to use AI evaluator only supports equals operator");const r=t().permissionsService.shouldShowAiAssistant?.();if(!r)return!1===i;const o=t().entitiesService.v1.workspacesEntities.getCurrentWorkspaceId(),{can:s}=t().permissionsService.canActionInScope(t().permissionsService.UserActions.PERMISSION_TO_USE_AI,{workspaceId:o});if(o&&!s)return!1===i;const{can:a}=t().permissionsService.canActionInScope(t().permissionsService.UserActions.PERMISSION_TO_USE_AI,{boardId:e});return e&&!a?!1===i:!0===i}catch(r){return t().loggerService.error(r,void 0,{tags:{error_source_type:"permissions-to-use-ai-evaluator"}}),!1}}},Ye={name:ee.IS_COUNTRY,selector:e=>e.currentUser?.country_code??null,evaluator:(e,t,n)=>t===Z.EQUALS?e===n:t===Z.IN&&n.includes(e)},Je={name:ee.ACCOUNT_MEMBERS_COUNT,selector:e=>e.currentAccount?.active_members_count??null,evaluator:(e,t,n)=>{const i="object"==typeof n&&Array.isArray(n),r="number"==typeof n;return null!==e&&(i&&t===Z.IN?n.includes(e):r&&t===Z.EQUALS?n===e:r&&t===Z.GREATER_THAN?e>n:!(!r||t!==Z.LESS_THAN)&&e<n)}},Ke={name:ee.PAYMENT_CURRENCY,selector:e=>e.currentAccount?.payment_currency??null,evaluator:(e,t,n)=>null!==e&&(t===Z.EQUALS?e===n:t===Z.IN&&n.includes(e))},Xe={name:ee.HAS_SEEN_TIPSEEN,selector:e=>q.tipsSeenEntities.selectors.getAllTipsSeen(e),evaluator:(e,t,n)=>!(!e||!n)&&(t===Z.EQUALS&&("string"==typeof n?e.has(n):n.every((t=>e.has(t)))))},Ze={name:ee.IS_IN_IFRAME,evaluator:(e,t,n)=>{if(t===Z.EQUALS)return(()=>{try{return window.self!==window.top}catch(ri){return!1}})()===n;throw new Error("Is iframe evaluator only supports equals operator")}},et="mid_touch_accounts_2025",tt={name:ee.MID_TOUCH,prefetchVulcanState:async()=>{const e=q.currentAccount.getState()?.id??null;e&&await $e({featureName:et,filters:{pulse_account_id:String(e)}},36e5)},evaluator:(e,t,n)=>{const i=q.getState(),r=i?.currentAccount?.id??null;if(!r||!i)return!1;const o=je({featureName:et,filters:{pulse_account_id:String(r)}}),s=i.bigBrainDataAPIFeatures[o]?.data??[],a=s[0];if(!a)return!1;const c=a.sys_last_refresh,l=c?new Date(c):null;if(!l||Number.isNaN(l.getTime()))return!1;const u=s[0]?.churn_risk_level??null;return!!u&&(!(Date.now()-l.getTime()<n.account_mid_touch_conversion_min_age_ms)&&(t===Z.EQUALS?"string"==typeof n.churn_risk_level&&u===n.churn_risk_level:t===Z.IN&&(!!Array.isArray(n.churn_risk_level)&&n.churn_risk_level.includes(u))))}},nt={name:ee.IGNITE_FLAG,evaluator:(e,t,n)=>{if(t===Z.EQUALS)return me.isReleased(n);throw new Error("Ignite flag evaluator only supports equals operator")}},it={},rt=Ue([e=>e.currentAccount,e=>(e=>q.accountProductsEntities.selectors.selectActiveAccountProduct(e))(e)?.id??void 0,e=>e.currentAccount?.products_subscription_state??it],((e,t,n)=>({hasStandaloneProducts:e?.has_standalone_products??!1,activeProductId:t,productsSubscriptionState:n}))),ot={name:ee.IS_IN_TRIAL,selector:rt,evaluator:(e,t,n)=>{if(t!==Z.EQUALS)throw new Error("Is in trial evaluator only supports equals operator");if(!e)return!1;if(!e.hasStandaloneProducts)return!1;if(!e.productsSubscriptionState||0===Object.keys(e.productsSubscriptionState).length)return!1;const i=e.activeProductId;if(!i)return!1;const r=e.productsSubscriptionState[i];return"TRIAL"===r?.state===n}},st={userRole:ne,userGoal:qe,userEmail:{name:ee.USER_EMAIL,selector:e=>e.currentUser?.email??null,evaluator:(e,t,n)=>{if(!e||!n)return!1;if(t===Z.EQUALS)return n.toLowerCase()===e.toLowerCase();if(t===Z.CONTAINS)return e.toLowerCase().includes(n.toLowerCase());throw new Error(`user email evaluator only supports "equals" and "contains" operators, got: ${t}`)}},activeProduct:ie,activeBoard:Ve,abTest:Be,featureFlag:ze,nthJoiner:Pe,isFirstUser:He,permissionToUseAi:We,isAiVisibleToAccount:De,isCountry:Ye,accountMembersCount:Je,paymentCurrency:Ke,hasSeenTipseen:Xe,isInIframe:Ze,accountAge:{name:ee.ACCOUNT_AGE,evaluator:()=>{throw new Error("Account age criteria is not supported")}},churnRiskLevel:Ge,midTouch:tt,igniteFlag:nt,isInTrial:ot};function at(e){const t=[];for(const n of e)dt(n)&&"name"in n?t.push(n):"conditions"in n&&Array.isArray(n.conditions)&&t.push(...at(n.conditions));return t}function ct(e){const t=at(e.inclusionCriteria?.conditions||[]);return t.length>1&&K("Multiple AB test conditions found",{conditions:t}),t[0]}function lt(e){const n=ct(e);return n?t().permissionsService.getAbTestVariant(n.value.name):null}function ut(e,t){return{result:e,details:{failedConditions:[],passedConditions:[],path:t}}}function dt(e){if("type"in e)return ft(e);return e.name===ee.AB_TEST}function ft(e){return e.conditions.some((e=>"type"in e?ft(e):e.name===ee.AB_TEST))}function pt(e,t,n){if("type"in e&&e.type===I.AND)return function(e,t,n){const i=[...t,I.AND],r=function(e){return e.length>0&&"inclusionCriteria"===e[0]}(t)&&(o=e.conditions,o.some((e=>dt(e))));var o;if(r)return function(e,t,n){const i=[];for(let r=0;r<e.conditions.length;r++){const o=e.conditions[r],s=[...t,r.toString()];if(!dt(o)){const e=gt(o,s,n);if(i.push(e),!e.result)return ht(!1,i,t)}}for(let r=0;r<e.conditions.length;r++){const o=e.conditions[r],s=[...t,r.toString()];if(dt(o)){const e=gt(o,s,n);if(i.push(e),!e.result)return ht(!1,i,t)}}return ht(!0,i,t)}(e,i,n);return function(e,t,n){const i=[];let r=!0;for(let o=0;o<e.conditions.length;o++){const s=[...t,o.toString()],a=gt(e.conditions[o],s,n);i.push(a),a.result||(r=!1)}return ht(r,i,t)}(e,i,n)}(e,t,n);if("type"in e&&e.type===I.OR)return function(e,t,n){const i=[...t,I.OR],r=[];let o=!1;for(let s=0;s<e.conditions.length;s++){const t=[...i,s.toString()],a=gt(e.conditions[s],t,n);r.push(a),a.result&&(o=!0)}return ht(o,r,i)}(e,t,n);throw new Error("Invalid criteria")}function ht(e,t,n){const i=t.flatMap((e=>e.details.failedConditions)),r=t.flatMap((e=>e.details.passedConditions)),o=(e,t)=>parseInt(e.path[e.path.length-1])-parseInt(t.path[t.path.length-1]);return{result:e,details:{failedConditions:i.sort(o),passedConditions:r.sort(o),path:n}}}function gt(e,t,n){if("type"in e)return pt(e,t,n);const i=e;try{const e=function(e,t,n,i){const r=st[e];if(!r)throw new Error(`Unknown condition: ${e}`);let o=null;if(r.selector){const e=q.getState();if(!e)return X("Failed to get state from vulcan"),!1;o=r.selector(e)}return r.evaluator(o,t,n,i)}(i.name,i.operator,i.value,n);return e?{result:!0,details:{failedConditions:[],passedConditions:[{condition:i,path:t}],path:t}}:{result:!1,details:{failedConditions:[{condition:i,path:t,reason:`Condition '${i.name}' evaluated to false`}],passedConditions:[],path:t}}}catch(r){return{result:!1,details:{failedConditions:[{condition:i,path:t,reason:r instanceof Error?r.message:"Unknown error occurred"}],passedConditions:[],path:t}}}}const mt=(e,t)=>({name:ee.USER_ROLE,operator:e,value:t}),_t=mt(Z.EQUALS,"admin"),yt=mt(Z.IN,Object.freeze(["admin","member"])),vt=mt(Z.IN,Object.freeze(["admin","member","viewer"])),wt={name:ee.IS_AI_VISIBLE_TO_ACCOUNT,operator:Z.EQUALS,value:!0},St={name:ee.ACTIVE_PRODUCT,operator:Z.EQUALS,value:"core"},Et={name:ee.ACTIVE_PRODUCT,operator:Z.EQUALS,value:"crm"},At={name:ee.ACTIVE_PRODUCT,operator:Z.EQUALS,value:"service"},bt=(Ct="table",Array.isArray(Ct)?{name:ee.ACTIVE_BOARD,operator:Z.IN,value:Ct}:{name:ee.ACTIVE_BOARD,operator:Z.EQUALS,value:Ct});var Ct;const It=e=>({name:ee.USER_EMAIL,operator:Z.CONTAINS,value:e}),Tt={name:ee.USER_GOAL,operator:Z.EQUALS,value:"work"},Rt={name:ee.IS_FIRST_USER,operator:Z.EQUALS,value:!0};ee.PERMISSION_TO_USE_AI,Z.EQUALS;const Nt={name:ee.IS_IN_IFRAME,operator:Z.EQUALS,value:!0},Ot=e=>({name:ee.IS_COUNTRY,operator:Z.EQUALS,value:e}),Ut={name:ee.IS_IN_TRIAL,operator:Z.EQUALS,value:!0},kt=e=>({name:ee.FEATURE_FLAG,operator:Z.EQUALS,value:e}),xt=(e,t)=>({name:ee.AB_TEST,operator:Z.EQUALS,value:{name:e,newVersion:t}}),Lt=e=>({name:ee.HAS_SEEN_TIPSEEN,operator:Z.EQUALS,value:e}),Mt=e=>({name:ee.IGNITE_FLAG,operator:Z.EQUALS,value:e}),Vt="ai-board-overview",Dt={name:Vt,inclusionCriteria:{type:I.AND,conditions:[{type:I.AND,conditions:[yt,wt,St]},{type:I.OR,conditions:[kt("ai_board_overview")]}]}},Pt="ai-board-overview-in-dialog",Bt={name:Pt,inclusionCriteria:{type:I.OR,conditions:[{type:I.AND,conditions:[yt,wt,St,xt(Pt,"with-new-ai-board-overview-v2")]},{type:I.OR,conditions:[kt("ai_board_overview_in_dialog")]}]}},zt="cancellation-flow-mid-touch",jt={name:zt,inclusionCriteria:{type:I.OR,conditions:[{type:I.AND,conditions:[_t,(Ft=["low","medium","high"],{name:ee.CHURN_RISK_LEVEL,operator:Z.IN,value:Ft}),xt("cancellation_flow_mid_touch","new_with_mid_touch")]},{type:I.OR,conditions:[kt("qa-cancellation-mid-touch")]}]},exclusionCriteria:{type:I.OR,conditions:[kt("exclude-cancellation-mid-touch")]}};var Ft;const $t="slack-instant-messaging",Qt="slack_instant_messaging_v2",Gt="new_with_updated_user_card",qt={name:$t,inclusionCriteria:{type:I.AND,conditions:[vt,(Ht=100,{name:ee.ACCOUNT_MEMBERS_COUNT,operator:Z.LESS_THAN,value:Ht}),xt(Qt,Gt)]}};var Ht;const Wt="interactive_agent_config_ghjbntmy@monday.com",Yt="US",Jt="jax-setup-agent-config-v3",Kt={name:Jt,inclusionCriteria:{type:I.OR,conditions:[{type:I.AND,conditions:[{type:I.OR,conditions:[It("jax_setup_agent_ab_test_v3@monday.com"),It(Wt)]},St,bt]},{type:I.AND,conditions:[St,Ut,Rt,Tt,Ot(Yt),bt,xt("jax_setup_agent_ab_test_v3","new_with_jax_setup_agent_v3")]}]},exclusionCriteria:{type:I.OR,conditions:[Lt("setup_question_ai_hand_raiser_should_contact_me_yes"),Nt,Mt("jax_v3_agent_kill_switch")]}},Xt="jax-setup-agent-config-crm",Zt={name:Xt,inclusionCriteria:{type:I.OR,conditions:[{type:I.AND,conditions:[(en="jax_setup_agent_crm@monday.com",{name:ee.USER_EMAIL,operator:Z.EQUALS,value:en}),Et]},{type:I.AND,conditions:[Et,Rt,Tt,Ot(Yt),xt("jax_setup_agent_ab_test_crm","new_with_jax_setup_agent_crm")]}]},exclusionCriteria:{type:I.OR,conditions:[Lt("setup_question_ai_hand_raiser_should_contact_me_yes"),Nt,Mt("jax_crm_agent_kill_switch")]}};var en;const tn="jax-setup-agent-permissions-v4",nn={name:tn,inclusionCriteria:{type:I.OR,conditions:[{type:I.AND,conditions:[{type:I.OR,conditions:[It("jax_setup_agent_permissions_ab_test_v4@monday.com"),It(Wt)]},St,bt]},{type:I.AND,conditions:[St,Ut,Rt,Tt,Ot(Yt),bt,xt("jax_setup_agent_permissions_ab_test_v4","new_with_jax_setup_agent_permissions_v4")]}]},exclusionCriteria:{type:I.OR,conditions:[Nt,Mt("jax_v4_agent_kill_switch")]}},rn="integration-v3",on="slack_auto_connect_from_column_notifications_ab_test",sn="new_with_slack_auto_connect_column_notifications",an={name:rn,inclusionCriteria:{type:I.AND,conditions:[xt(on,sn)]}},cn="pricing-sharing-config",ln={name:cn,inclusionCriteria:{type:I.AND,conditions:[St,Tt,xt("pricing_sharing_ab_test","new_with_pricing_sharing")]}},un="aggressive_coffee_comparison_eligibility",dn={name:un,inclusionCriteria:{type:I.AND,conditions:[_t,(pn=["US","GB","CA","AU"],{name:ee.IS_COUNTRY,operator:Z.IN,value:pn}),(fn=["USD","GBP","CAD","AUD"],{name:ee.PAYMENT_CURRENCY,operator:Array.isArray(fn)?Z.IN:Z.EQUALS,value:fn})]}};var fn,pn;const hn="resurrection-offer",gn={name:hn,inclusionCriteria:{type:I.AND,conditions:[_t,St,xt("resurrection-offer","new-resurrection-offer")]},exclusionCriteria:{type:I.OR,conditions:[kt("exclude-resurrection-offer")]}},mn="sidekick-context-for-onboarding",_n={name:mn,inclusionCriteria:{type:I.AND,conditions:[St,Rt,Ut,Tt,bt]},exclusionCriteria:{type:I.OR,conditions:[Mt("sidekick_context_for_onboarding_killswitch"),Lt("sidekick_opened_with_onboarding_context")]}},yn="mid-touch-blank-report-creation",vn="mid_touch_blank_report_creation",wn="new_with_mid_touch_blank_report_creation",Sn={name:yn,inclusionCriteria:{type:I.OR,conditions:[{type:I.AND,conditions:[(En={churn_risk_level:["low","medium","high"],account_mid_touch_conversion_min_age_ms:1728e5},{name:ee.MID_TOUCH,operator:Z.IN,value:En}),xt(vn,wn)]},{type:I.OR,conditions:[Mt("qa_mid_touch_blank_report_creation")]}]},exclusionCriteria:{type:I.OR,conditions:[Lt("churn_risk_book_a_meeting_tipseen")]}};var En;const An="vibe-apps-in-template-center-config",bn={name:An,inclusionCriteria:{type:I.AND,conditions:[xt("vibe_apps_in_template_center_ab_test_v3","new_with_vibe_tampletes")]}},Cn="chat-cta",In={name:Cn,exclusionCriteria:{type:I.OR,conditions:[Nt,{type:I.AND,conditions:[At,Ut]}]}},Tn="chat-with-tim-cta",Rn="chat_with_tim_cta_ab_test",Nn="new_with_chat_with_tim_cta",On={name:Tn,inclusionCriteria:{type:I.AND,conditions:[xt(Rn,Nn)]},exclusionCriteria:{type:I.OR,conditions:[Ut]}},Un={[Vt]:Dt,[Pt]:Bt,[zt]:jt,[Jt]:Kt,[tn]:nn,[Xt]:Zt,[mn]:_n,[rn]:an,[$t]:qt,[un]:dn,[hn]:gn,[cn]:ln,[yn]:Sn,[An]:bn,[Cn]:In,[Tn]:On};function kn(e,t){if("type"in e&&(e.type===I.AND||e.type===I.OR))return void e.conditions.forEach((e=>kn(e,t)));const n=e,i=st[n.name];i&&i.selector&&t.add(n.name)}function xn(e,t){if("type"in e&&(e.type===I.AND||e.type===I.OR))return void e.conditions.forEach((e=>xn(e,t)));const n=e,i=st[n.name];i&&i.prefetchVulcanState&&t.add(n.name)}function Ln(){const e=new Map;return Object.keys(Un).forEach((t=>{const n=function(e){const t=new Set;return e.inclusionCriteria&&kn(e.inclusionCriteria,t),e.exclusionCriteria&&kn(e.exclusionCriteria,t),Array.from(t).sort(((e,t)=>e.localeCompare(t)))}(Un[t]);n.forEach((n=>{e.has(n)||e.set(n,new Set),e.get(n).add(t)})),J(`ðŸ“ Config '${t}' depends on selectors: [${n.join(", ")}]`)})),0===e.size?K("Dependency map is empty!"):J("ðŸ”— Dependency mapping initialized:",Array.from(e.entries()).map((([e,t])=>`${e}: [${Array.from(t).join(", ")}]`))),e}const Mn=async(e,t)=>{const n=function(e){const t=new Set;return e.inclusionCriteria&&xn(e.inclusionCriteria,t),e.exclusionCriteria&&xn(e.exclusionCriteria,t),Array.from(t).sort(((e,t)=>e.localeCompare(t)))}(Un[e]);await Promise.all([...n].map((e=>st[e]?.prefetchVulcanState)).filter(Boolean).map((e=>e(t))))},Vn=async(e,t)=>{const n=Un[e];if(!n)return{result:!1};await Mn(e,t);const i=((e,t)=>{const{inclusionCriteria:n,exclusionCriteria:i}=e,r=i?pt(i,["exclusionCriteria"],t):ut(!1,["exclusionCriteria"]);if(r.result)return{result:!1,inclusionCriteria:ut(null,["inclusionCriteria"]),exclusionCriteria:r};const o=n?pt(n,["inclusionCriteria"],t):ut(!0,["inclusionCriteria"]);return{result:!!o.result&&!r.result,inclusionCriteria:{result:o.result,details:{failedConditions:o.details.failedConditions,passedConditions:o.details.passedConditions,path:["inclusionCriteria"]}},exclusionCriteria:{result:r.result,details:{failedConditions:r.details.failedConditions,passedConditions:r.details.passedConditions,path:["exclusionCriteria"]}}}})(n,t);return i.result&&(i.variantName=lt(n)),Y(`${e} result:`,i),Y(`${e} inclusionCriteria details:`,i.inclusionCriteria?.details),Y(`${e} exclusionCriteria details:`,i.exclusionCriteria?.details),i},Dn=async(e,t)=>await Vn(e,{bigBrainEvent:t}),Pn=async e=>await Vn(e,{bigBrainEvent:!1,isInTestCheck:!0}),Bn=async e=>{const t=Un[e];return(await Vn(e,{bigBrainEvent:!1,isInTestCheck:!0})).result?lt(t):null},zn=async e=>{try{Y("enterTest",e);if(!(await Vn(e,{bigBrainEvent:!1,isInTestCheck:!0})).result)return X(`enterTest result for ${e} is false due to audience filter`),!1;const n=ct(Un[e]);if(!n)return X(`enterTest abTest condition for ${e} is false`),!1;const i=t().permissionsService.getAbTestVariant(n.value.name);return Y(`enterTest: calling shouldSeeTest with ${JSON.stringify(n.value)}, for variant: ${i}`),t().permissionsService.shouldSeeTest(n.value,!0),!0}catch(n){return X(`enterTest failed for ${e}:`,n),!1}},jn={shouldSeeExperience:!1,isInTest:!1,isLoading:!0,error:null,lastUpdatedAt:0};const Fn=new class{constructor(){this.stateByConfig=new Map,this.listeners=new Set,this.watched=new Set,this.dependencyMap=null,this.debounceTimers=new Map,this.pendingResolvers=new Map,this.subscribe=e=>(this.listeners.add(e),()=>this.listeners.delete(e)),this.emit=()=>{this.listeners.forEach((e=>e()))},this.getSnapshot=e=>this.stateByConfig.get(e)??jn,this.ensureEvaluated=async(e,t)=>{this.initialiseDependencies();const n=!this.watched.has(e);this.watched.add(e),n&&J(`ðŸ‘€ Now watching config: ${e}`),this.stateByConfig.has(e)||(this.stateByConfig.set(e,{...jn}),this.emit()),await this.recompute(e,t)},this.recompute=async(e,t)=>{const n=this.debounceTimers.get(e);return n&&clearTimeout(n),new Promise((n=>{this.pendingResolvers.has(e)||this.pendingResolvers.set(e,[]),this.pendingResolvers.get(e).push(n);const i=setTimeout((async()=>{this.debounceTimers.delete(e),await this.executeRecompute(e,t);const n=this.pendingResolvers.get(e)||[];this.pendingResolvers.delete(e),n.forEach((e=>e()))}),200);this.debounceTimers.set(e,i)}))},this.executeRecompute=async(e,t)=>{try{J(`ðŸ”„ Recomputing config: ${e}`,t?{options:t}:""),this.setState(e,{isLoading:!0,error:null}),this.emit();const[n,i]=await Promise.all([Dn(e,!!t?.enterTest),Pn(e)]),r={shouldSeeExperience:!!n?.result,isInTest:!!i?.result,isLoading:!1,error:null};this.setState(e,r),J(`âœ… ${e} evaluation complete:`,{shouldSeeExperience:r.shouldSeeExperience,isInTest:r.isInTest})}catch(ri){const n=ri?.message??"Unknown error";X(`âŒ ${e} evaluation failed:`,n),this.setState(e,{shouldSeeExperience:!1,isInTest:!1,isLoading:!1,error:n})}this.emit()},this.enterTest=async e=>{Y(`ðŸŽ¯ Entering test for config: ${e}`),await zn(e),await this.recompute(e)},this.getConfigsAffectedBySelectors=e=>(this.initialiseDependencies(),function(e,t,n){const i=new Set;return n.forEach((n=>{const r=e.get(n);void 0!==r&&r.forEach((e=>t.has(e)&&i.add(e)))})),Array.from(i)}(this.dependencyMap,this.watched,e)),this.recomputeAffectedConfigs=async e=>{const t=this.getConfigsAffectedBySelectors(e);0!==t.length?(J(`ðŸŽ¯ Selectively recomputing ${t.length} configs affected by [${e.join(", ")}]:`,t),await Promise.all(t.map((e=>this.recompute(e)))),J(`âœ… Completed selective recomputation of ${t.length} configs`)):J("â­ï¸ No configs affected by changed selectors:",e)}}initialiseDependencies(){this.dependencyMap&&this.dependencyMap.size>0||(this.dependencyMap=Ln())}setState(e,t){const n={...this.getSnapshot(e),...t,lastUpdatedAt:Date.now()};this.stateByConfig.set(e,n)}};function $n(){return{shouldSeeExperience:Dn,isInTest:Pn,enterTest:zn,getVariantName:Bn,growthRolloutStoreApi:{subscribe:Fn.subscribe,getSnapshot:Fn.getSnapshot,ensureEvaluated:Fn.ensureEvaluated,enterTest:Fn.enterTest}}}function Qn(e,t,{signal:n,edges:i}={}){let r,o=null;const s=null!=i&&i.includes("leading"),a=null==i||i.includes("trailing"),c=()=>{null!==o&&(e.apply(r,o),r=void 0,o=null)};let l=null;const u=()=>{null!=l&&clearTimeout(l),l=setTimeout((()=>{l=null,a&&c(),d()}),t)},d=()=>{null!==l&&(clearTimeout(l),l=null),r=void 0,o=null},f=function(...e){if(n?.aborted)return;r=this,o=e;const t=null==l;u(),s&&t&&c()};return f.schedule=u,f.cancel=d,f.flush=()=>{c()},n?.addEventListener("abort",d,{once:!0}),f}var Gn,qn;const Hn=T(qn?Gn:(qn=1,Gn=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;for(r of t.entries())if(!e(r[1],n.get(r[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(t[r]!==n[r])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!==r--;){var s=o[r];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n})),Wn=(e,n,i)=>{const r=[];return n.forEach((({name:n,selector:o})=>{((e,n,i,r)=>{try{const t=i(e),o=r.get(n);if(J(`ðŸ”„ ${n} check if changed:`,{from:o,to:t}),"object"!=typeof t||null===t)return J(`ðŸ”„ ${n} is primitive:`,{from:o,to:t}),t!==o&&(r.set(n,t),J(`ðŸ”„ ${n} changed:`,{from:o,to:t}),!0);const s=Hn(t,o);return J(`ðŸ”„ ${n} isEqual:`,{from:o,to:t,isEqual:s}),!s&&(r.set(n,t),J(`ðŸ”„ ${n} changed:`,{from:o,to:t}),!0)}catch(o){return t().loggerService.error(o,{message:`Error processing selector of name: ${n}`}),!1}})(e,n,o,i)&&r.push(n)})),r},Yn=(e,n,i)=>function(e,t=0,n={}){"object"!=typeof n&&(n={});const{leading:i=!1,trailing:r=!0,maxWait:o}=n,s=Array(2);let a;i&&(s[0]="leading"),r&&(s[1]="trailing");let c=null;const l=Qn((function(...t){a=e.apply(this,t),c=null}),t,{edges:s}),u=function(...t){return null!=o&&(null===c&&(c=Date.now()),Date.now()-c>=o)?(a=e.apply(this,t),c=Date.now(),l.cancel(),l.schedule(),a):(l.apply(this,t),a)};return u.cancel=l.cancel,u.flush=()=>(l.flush(),a),u}((async i=>{const r=Wn(i,e,n);await(async e=>{if(0!==e.length){J(`âš¡ Vulcan state changed, recomputing configs. Changed values: [${e.join(", ")}]`);try{await Fn.recomputeAffectedConfigs(e),J("âœ… Selective recompute completed")}catch(n){t().loggerService.error(n,{message:`Error processing state changes for following evaluators: ${e.join(", ")}`})}}})(r)}),i,{maxWait:2*i}),Jn=()=>{J("ðŸš€ Vulcan reactor initializing...");const e=Object.values(st).filter((e=>e.selector)).map((e=>({name:e.name,selector:e.selector}))),n=q.getState();let i=new Map;n&&(i=((e,n)=>{const i=new Map;return n.forEach((({name:n,selector:r})=>{try{const t=r(e);i.set(n,t),J(`ðŸ“Š Initial ${n}:`,t)}catch(o){t().loggerService.error(o,{message:`Error processing initial vulcan state for evaluator: ${n}`})}})),i})(n,e)),J("âœ… Vulcan reactor initialized successfully");const r=Yn(e,i,200),o=q.subscribe(r);return{unsubscribe:()=>{try{o()}catch(ri){}}}};let Kn;const Xn=Object.freeze(Object.defineProperty({__proto__:null,init:async function(){if(((e=!1)=>{C($n,e)})(),!Kn){const{unsubscribe:e}=Jn();Kn=e}}},Symbol.toStringTag,{value:"Module"})),{init:Zn,updateInitialData:ei,unmount:ti,render:ni}=Xn,ii=e=>{if(e)return(...n)=>{try{e(...n)}catch(ri){const{loggerService:n}=t();throw n?n.error(ri):console.error(ri),ri}}};globalThis["MF-mf-growth-rollout"]={init:({api:n,...i})=>{const r=(e=>new Proxy(e,{get(e,t){if("loggerService"===t&&e.loggerService){const{loggerService:t}=e;return{...t,error:(e,n,i)=>{t.error(e,n,i,"mf-growth-rollout")}}}return e[t]}}))(n);!function(t){e=t}(r),function(e={release:"",dsn:"",environment:"",origin:""}){const{project:n,release:i,dsn:r,environment:o,origin:s}=e,{loggerService:a}=t();a&&n&&i&&r&&a.addClient(n,{release:i,dsn:r,environment:o,origin:s})}({project:"mf-growth-rollout",release:"5b89bbd38340bba247003b6a1ba4579012436a5f",dsn:"https://d036580ac340a1593d00d4eec5444d65@o916138.ingest.us.sentry.io/4509446176374784",environment:"production",origin:"https://microfrontends.monday.com/mf-growth-rollout"}),ii(Zn)({api:r,...i})},render:ii(ni),updateInitialData:ii(ei),unmount:ii(ti)};
